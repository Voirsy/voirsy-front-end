(this["webpackJsonpvoirsy-front-end"]=this["webpackJsonpvoirsy-front-end"]||[]).push([[0],{409:function(e,t,n){},410:function(e,t,n){"use strict";n.r(t);var a,r=n(1),i=n.n(r),c=n(61),o=n.n(c),s=n(6),l=n(150),d=n(454),j=n(524),u=n(525),b=n(453),p=n(22),O=n(357),h=n(451),m=Object(h.a)(j.a)((function(e){var t=e.theme;return{color:t.palette.text.primary,borderColor:Object(O.a)(t.palette.common.black,.23),"&:hover":{borderColor:Object(O.a)(t.palette.common.black,.23)}}})),x=n(0),f=function(e){var t=e.children;return Object(x.jsx)(m,{variant:"outlined",fullWidth:!0,size:"large",component:p.b,to:"/",children:t})},v=n(452),g=n(523),y=n(97),w=n(56),S="https://voirsy-backend.herokuapp.com",k="/profile/favorites",I="/profile",C="/profile",T="/profile",z=function(){return!!localStorage.getItem("JWT_TOKEN")},F=function(){return localStorage.getItem("JWT_TOKEN")||""},D=function(e){localStorage.removeItem("JWT_TOKEN"),e("/")},A=function(e){var t="Bearer ".concat(F());return t&&e.set("Authorization",t),e},q=Object(y.a)({reducerPath:"profileApi",baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),endpoints:function(e){return{fetchAllUsersFavorites:e.query({query:function(){return"".concat(k)},transformResponse:function(e){return e.favorites}}),changePassword:e.mutation({query:function(e){return{url:"".concat(I),method:"POST",body:e}}}),deleteAccount:e.mutation({query:function(){return{url:"".concat(C),method:"DELETE"}}}),changeUserData:e.mutation({query:function(e){return{url:"".concat(T),method:"PATCH",body:e}},transformResponse:function(e){return e.user}})}}}),B=q.useFetchAllUsersFavoritesQuery,E=q.useChangePasswordMutation,W=q.useDeleteAccountMutation,P=q.useChangeUserDataMutation,M=n(35),R=n(32),_=function(){var e=W(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=a.isSuccess,c=a.isError,o=a.isLoading,p=Object(M.b)().enqueueSnackbar,O=Object(v.a)("profile"),h=Object(s.a)(O,1)[0],m=Object(R.g)();return Object(r.useEffect)((function(){i&&(p(h("delete.successMsg"),{variant:"success"}),D(m.push)),c&&p(h("delete.errorMsg"),{variant:"error"})}),[i,c]),Object(x.jsxs)(b.a,{component:"main",maxWidth:400,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:h("delete.heading")}),Object(x.jsx)(l.a,{marginBottom:10,textAlign:"center",fontSize:"1.25rem",children:Object(x.jsx)(g.a,{defaults:h("delete.content"),components:[Object(x.jsx)("strong",{},"delete")]})}),Object(x.jsxs)(d.a,{direction:"row",spacing:2.5,children:[Object(x.jsx)(f,{children:h("delete.action.cancel")}),Object(x.jsx)(j.a,{disabled:o,variant:"contained",fullWidth:!0,size:"large",color:"error",onClick:function(){return n()},children:o?Object(x.jsx)(u.a,{size:25}):h("delete.action.delete")})]})]})},L=n(532),U=n(463),H=n(518),N=n(461),V=n(533),Q=n(50),G=n(534),Z=n(509),$=n(464),J=n(511),K=n(462),Y=n(3),X=n(5),ee=n(237),te=n(19),ne=Object(ee.a)({palette:{primary:{light:"#66e0ff",main:"#19aed4",dark:"#007ea3",contrastText:te.a.grey[50]},secondary:{light:"#fa70ab",main:"#c43d7c",dark:"#8f0050",contrastText:"#fff"},text:{primary:te.a.grey[900],secondary:te.a.grey[600]}}}),ae=Object(X.a)("div")((function(){return Object(Y.a)({boxSizing:"border-box",height:"40px",border:"1px solid ".concat(ne.palette.grey[400]),borderRadius:ne.shape.borderRadius,display:"flex",alignItems:"center",width:"100%",div:{flexGrow:1},button:{margin:"0 ".concat(ne.spacing(1))},":focus-within":{border:"1px solid ".concat(ne.palette.primary.main)}},ne.breakpoints.up("sm"),{maxWidth:"400px"})}));!function(e){e.MostPopular="Most popular",e.TopRated="Top rated",e.QuantityOfRating="Quantity of ratings"}(a||(a={}));var re,ie,ce,oe=n(516),se=function(e){var t=e.label,n=e.onDelete;return Object(x.jsx)(oe.a,{label:t,onDelete:n,color:"secondary",sx:{textTransform:"capitalize"}})},le=n(14),de=n(186),je=n(508),ue=n(526),be=Object(X.a)(l.a,{shouldForwardProp:function(e){return"isOpen"!==e}})((function(e){var t=e.isOpen;return Object(Y.a)({position:"absolute",inset:0,display:"flex",alignItems:"center",paddingLeft:ne.spacing(1),color:t?ne.palette.background.paper:ne.palette.text.primary,textTransform:"uppercase"},ne.breakpoints.up("sm"),{paddingLeft:ne.spacing(2)})})),pe=Object(X.a)(ue.a,{shouldForwardProp:function(e){return"isOpen"!==e}})((function(e){var t=e.isOpen;return Object(Y.a)({flexGrow:1,minWidth:"130px",borderRadius:ne.shape.borderRadius,background:t?ne.palette.primary.main:ne.palette.background.paper,"svg *":{fill:t?ne.palette.background.paper:ne.palette.text.primary}},ne.breakpoints.up("sm"),{maxWidth:"180px"})})),Oe=["label","children","MenuProps"],he=function(e){var t=e.label,n=e.children,a=e.MenuProps,i=Object(de.a)(e,Oe),c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=o[0],d=o[1];return Object(x.jsxs)(pe,{isOpen:l,children:[Object(x.jsx)(be,{isOpen:l,variant:"body2",id:"location-helper-label",children:t}),Object(x.jsx)(je.a,Object(le.a)(Object(le.a)({onOpen:function(){return d(!0)},onClose:function(){return d(!1)},labelId:"location-helper-label",id:"location-helper",color:"primary",renderValue:function(){return""},size:"small",MenuProps:Object(le.a)({transformOrigin:{vertical:"top",horizontal:"left"},anchorOrigin:{vertical:"bottom",horizontal:"left"}},a)},i),{},{children:n}))]})},me="/salons/",xe="/category",fe="/cities",ve="/profile/favorites",ge="/profile/favorites",ye=Object(y.a)({reducerPath:"salonsApi",baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),endpoints:function(e){return{fetchAllSalons:e.query({query:function(e){var t=e.location,n=void 0===t?"":t,a=e.search,r=void 0===a?"":a,i=e.sortBy,c=void 0===i?"":i,o=e.salonType,s=void 0===o?"":o,l={search:r};return n&&(l.location=n),c&&(l.sortBy=c),s.length>0&&(l.salonType=s),{url:"".concat(me),method:"post",body:l}}}),fetchAllCities:e.query({query:function(){return"".concat(fe)}}),fetchAllCategories:e.query({query:function(){return"".concat(xe)}}),addToFavorites:e.mutation({query:function(e){return{url:"".concat(ve),method:"POST",body:e}}}),removeFromFavorites:e.mutation({query:function(e){return{url:"".concat(ge),method:"DELETE",body:e}}})}}}),we=ye.useLazyFetchAllSalonsQuery,Se=ye.useFetchAllCategoriesQuery,ke=ye.useFetchAllCitiesQuery,Ie=ye.useAddToFavoritesMutation,Ce=ye.useRemoveFromFavoritesMutation,Te=n(24),ze=n(20),Fe=Object(ze.d)({name:"salonsFilters",initialState:{sortBy:"",search:"",location:"",salonType:[]},reducers:{setFilters:function(e,t){var n=t.payload;void 0!==n.search&&(e.search=n.search),void 0!==n.sortBy&&(e.sortBy=n.sortBy),void 0!==n.location&&(e.location=n.location),void 0!==n.salonType&&(e.salonType=n.salonType)}}}),De=Fe.actions.setFilters,Ae=Fe.reducer,qe=function(){var e,t,n=Object(v.a)(["home","common"]),i=Object(s.a)(n,1)[0],c=Object(Te.e)((function(e){return e.salonsFilters})),o=Object(Te.d)(),l=Object(N.a)(ne.breakpoints.up("sm")),j=Object(r.useState)(c.search),b=Object(s.a)(j,2),p=b[0],O=b[1],h=Se(),m=h.data,f=h.isFetching,g=ke(),y=g.data,w=g.isFetching,S=function(){return o(De({search:p}))};return Object(x.jsxs)(L.a,{component:"nav",maxWidth:!1,children:[Object(x.jsxs)(d.a,{direction:l?"row":"column",spacing:l?2:1,children:[Object(x.jsxs)(ae,{children:[Object(x.jsx)(V.a,{"aria-label":"menu",size:"small",onClick:S,children:Object(x.jsx)(K.a,{})}),Object(x.jsx)(Q.c,{placeholder:"".concat(i("filters.search.label"),"..."),inputProps:{"aria-label":i("filters.search.ariaLabel")},value:p,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&S()}})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:l?2:1,width:"100%",overflow:l?"visible":"auto",children:[Object(x.jsx)(he,{label:i("filters.location.label"),value:c.location,onChange:function(e){return o(De({location:e.target.value}))},MenuProps:{style:{maxHeight:"300px"}},children:w?Object(x.jsx)(U.a,{display:"flex",justifyContent:"center",padding:"10px 0",children:Object(x.jsx)(u.a,{})}):null===y||void 0===y?void 0:y.cities.map((function(e){return Object(x.jsxs)(G.a,{value:e._id,sx:{textTransform:"capitalize",paddingRight:3},children:[Object(x.jsx)(Z.a,{checked:e._id===c.location}),Object(x.jsx)($.a,{primary:e.name})]},e._id)}))}),Object(x.jsx)(he,{label:i("filters.salonType.label"),value:c.salonType,onChange:function(e){return o(De({salonType:e.target.value}))},multiple:!0,children:f?Object(x.jsx)(U.a,{display:"flex",justifyContent:"center",padding:"10px 0",children:Object(x.jsx)(u.a,{})}):null===m||void 0===m?void 0:m.categories.map((function(e){return Object(x.jsxs)(G.a,{value:e._id,sx:{textTransform:"capitalize",paddingRight:3},children:[Object(x.jsx)(J.a,{checked:c.salonType.indexOf(e._id)>-1}),Object(x.jsx)($.a,{primary:i("salonType.".concat(e.name.toLowerCase()),{ns:"common"})})]},e._id)}))}),Object(x.jsx)(he,{label:i("sortBy.label"),value:c.sortBy,onChange:function(e){return o(De({sortBy:e.target.value}))},children:Object.entries(a).map((function(e){return Object(x.jsxs)(G.a,{value:e[0],sx:{paddingRight:3},children:[Object(x.jsx)(Z.a,{checked:e[0]===c.sortBy}),Object(x.jsx)($.a,{primary:i("sortBy.options.".concat(e[0]))})]},e[0])}))})]})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:l?2:1,width:"100%",overflow:"auto",marginTop:l?2:1,children:[""!==c.location&&Object(x.jsx)(se,{label:"".concat(i("filters.location.label"),": ").concat(null===y||void 0===y||null===(e=y.cities.find((function(e){return e._id===c.location})))||void 0===e?void 0:e.name),onDelete:function(){return o(De({location:""}))}}),c.salonType.length>0&&c.salonType.map((function(e){var t;return Object(x.jsx)(se,{label:"".concat(i("filters.salonType.label"),": ").concat(null===m||void 0===m||null===(t=m.categories.find((function(t){return t._id===e})))||void 0===t?void 0:t.name),onDelete:function(){return o(De({salonType:c.salonType.filter((function(t){return t!==e}))}))}},e)})),""!==c.sortBy&&Object(x.jsx)(se,{label:"".concat(i("sortBy.label"),": ").concat(null===(t=Object.entries(a).find((function(e){return e[0]===c.sortBy})))||void 0===t?void 0:t[1]),onDelete:function(){return o(De({sortBy:""}))}})]})]})},Be=n(537),Ee=n(465),We=n(466),Pe=n(467),Me=n(468),Re=n(469),_e=n(51),Le=n(535),Ue=n(536),He=Object(X.a)(Le.a)(re||(re=Object(_e.a)(["\n  position: relative;\n"]))),Ne=Object(X.a)(Ue.a)(ie||(ie=Object(_e.a)(["\n  position: relative;\n\n  :last-child {\n    padding-bottom: ",";\n  }\n"])),ne.spacing(2)),Ve=Object(X.a)(oe.a)((function(){return{position:"absolute",background:ne.palette.background.paper,top:"10px",left:"10px",".MuiChip-icon":{color:ne.palette.warning.light}}})),Qe=Object(X.a)(V.a)((function(){return{position:"absolute",background:ne.palette.background.paper,top:"-".concat(ne.spacing(3)),right:ne.spacing(2),boxShadow:ne.shadows[6],":hover":{backgroundColor:ne.palette.background.paper},":disabled":{background:ne.palette.background.paper}}})),Ge=Object(X.a)(p.b)((function(){return{textDecoration:"none",color:ne.palette.text.primary,":hover":{color:ne.palette.text.secondary}}}));!function(e){e.Standard="STANDARD",e.Business="BUSINESS"}(ce||(ce={}));var Ze=n(26),$e=Object(ze.d)({name:"user",initialState:null,reducers:{setUserData:function(e,t){return t.payload},removeFromFav:function(e,t){var n=t.payload;(null===e||void 0===e?void 0:e.favorites)&&(e.favorites=e.favorites.filter((function(e){return e!==n})))},addToFav:function(e,t){var n=t.payload;(null===e||void 0===e?void 0:e.favorites)&&(e.favorites=[].concat(Object(Ze.a)(e.favorites),[n]))}}}),Je=$e.actions,Ke=Je.setUserData,Ye=Je.removeFromFav,Xe=Je.addToFav,et=$e.reducer,tt=function(e){var t=e.imageUrl,n=e.name,a=e.city,i=e.address,c=e.rating,o=e.salonType,j=e._id,b=Ie(),p=Object(s.a)(b,2),O=p[0],h=p[1],m=h.isError,f=h.isSuccess,g=h.isLoading,y=Ce(),w=Object(s.a)(y,2),S=w[0],k=w[1],I=k.isError,C=k.isSuccess,T=k.isLoading,F=Object(Te.d)(),D=Object(M.b)().enqueueSnackbar,A=Object(v.a)("common"),q=Object(s.a)(A,1)[0],B=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role})),E=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.favorites}))||[],W=z()&&B!==ce.Business,P=Object(r.useState)(!1),R=Object(s.a)(P,2),_=R[0],L=R[1];Object(r.useEffect)((function(){L(Boolean(E.find((function(e){return e===j}))))}),[]),Object(r.useEffect)((function(){m&&D(q("favoriteMsg.errorAdd",{ns:"home"}),{variant:"error"}),f&&(D(q("favoriteMsg.successAdd",{ns:"home"}),{variant:"success"}),L(!0),F(Xe(j)))}),[m,f]),Object(r.useEffect)((function(){I&&D(q("favoriteMsg.errorRemove",{ns:"home"}),{variant:"error"}),C&&(D(q("favoriteMsg.successRemove",{ns:"home"}),{variant:"success"}),L(!1),F(Ye(j)))}),[I,C]);var U=_?Object(x.jsx)(Ee.a,{}):Object(x.jsx)(We.a,{});return Object(x.jsxs)(He,{children:["0"!==c&&Object(x.jsx)(Ve,{size:"small",label:Math.round(10*parseFloat(c))/10,icon:Object(x.jsx)(Pe.a,{})}),Object(x.jsx)(Be.a,{component:"img",height:"160",image:t,alt:n}),Object(x.jsxs)(Ne,{children:[W&&Object(x.jsx)(Qe,{size:"large",disabled:g||T,onClick:function(){return _?S({salonId:j}):O({salonId:j})},children:g||T?Object(x.jsx)(u.a,{size:24}):U}),Object(x.jsx)(l.a,{gutterBottom:!0,variant:"subtitle1",component:"div",noWrap:!0,maxWidth:W?"90%":"100%",children:Object(x.jsx)(Ge,{to:"/".concat(j),children:n})}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,marginBottom:1,alignItems:"center",children:[Object(x.jsx)(Me.a,{sx:{color:"text.secondary",fontSize:20}}),Object(x.jsx)(l.a,{variant:"body2",color:"text.secondary",noWrap:!0,children:i})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,marginBottom:1.5,alignItems:"center",children:[Object(x.jsx)(Re.a,{sx:{color:"text.secondary",fontSize:20}}),Object(x.jsx)(l.a,{variant:"body2",color:"text.secondary",noWrap:!0,children:a})]}),Object(x.jsx)(d.a,{direction:"row",spacing:1,children:o.map((function(e){return Object(x.jsx)(oe.a,{label:q("salonType.".concat(e.toLowerCase())),size:"small",color:"secondary"},e)}))})]})]})},nt=function(){var e=Object(v.a)("home"),t=Object(s.a)(e,1)[0],n=we(),a=Object(s.a)(n,2),i=a[0],c=a[1],o=c.isError,d=c.data,j=void 0===d?{salons:[],message:""}:d,b=c.isFetching,p=Object(Te.e)((function(e){return e.salonsFilters}));return Object(r.useEffect)((function(){i({})}),[]),Object(r.useEffect)((function(){i(p)}),[p]),o?Object(x.jsx)(l.a,{children:t("error.unknown")}):Object(x.jsxs)("main",{children:[Object(x.jsx)(qe,{}),Object(x.jsxs)(L.a,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",marginTop:4,paddingBottom:4},children:[b&&Object(x.jsx)(U.a,{children:Object(x.jsx)(u.a,{})}),!b&&j.salons.length>0&&Object(x.jsx)(H.a,{container:!0,spacing:3,children:j.salons.map((function(e,t){return Object(x.jsx)(H.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(x.jsx)(tt,{_id:e._id,address:e.address,city:e.city,imageUrl:e.imageUrl,name:e.name,salonType:e.type,rating:e.rating})},t)}))}),!b&&0===j.salons.length&&Object(x.jsx)(l.a,{variant:"h5",children:"There are no salons to show"})]})]})},at=n(471),rt=n(472),it=n(538),ct=n(541),ot=["label","error"],st=Object(r.forwardRef)((function(e,t){var n=e.label,a=e.error,i=Object(de.a)(e,ot),c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=o[0],d=o[1];return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({},i),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"end",children:Object(x.jsx)(V.a,{onClick:function(){return d((function(e){return!e}))},edge:"end",children:l?Object(x.jsx)(at.a,{}):Object(x.jsx)(rt.a,{})})})},inputRef:t,fullWidth:!0,id:n,label:n,variant:"outlined",type:l?"text":"password",margin:"dense",error:!!a,helperText:null===a||void 0===a?void 0:a.message,size:"small"}))}));st.displayName="PasswordTextField";var lt,dt,jt=st,ut=n(36),bt=function(){var e=E(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=a.isSuccess,c=a.isError,o=a.isLoading,p=Object(M.b)().enqueueSnackbar,O=Object(v.a)(["profile","validation"]),h=Object(s.a)(O,1)[0],m=Object(ut.b)({defaultValues:{currentPassword:"",newPassword:""},mode:"all"}),g=m.handleSubmit,y=m.control,w=m.watch,S=m.reset,k=Object(r.useRef)({});k.current=w("currentPassword","");return Object(r.useEffect)((function(){i&&(p(h("password.successMsg"),{variant:"success"}),S()),c&&p(h("password.errorMsg"),{variant:"error"})}),[i,c]),Object(x.jsxs)(b.a,{component:"main",maxWidth:400,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:h("password.heading")}),Object(x.jsx)(b.a,{component:"form",onSubmit:g((function(e){return n({newPassword:e.newPassword,oldPassword:e.currentPassword})})),children:Object(x.jsxs)(d.a,{spacing:2.5,children:[Object(x.jsx)(ut.a,{name:"currentPassword",control:y,rules:{required:h("common.required",{ns:"validation"}),minLength:{value:8,message:h("common.minLength",{min:8,ns:"validation"})}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(jt,Object(le.a)({label:h("password.input.currentPassword"),error:n},t))}}),Object(x.jsx)(ut.a,{name:"newPassword",control:y,rules:{required:h("common.required",{ns:"validation"}),validate:function(e){return e!==k.current||h("password.cantMatch",{ns:"validation"})},minLength:{value:8,message:h("common.minLength",{min:8,ns:"validation"})}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(jt,Object(le.a)({label:h("password.input.newPassword"),error:n},t))}}),Object(x.jsxs)(d.a,{direction:"row",spacing:2.5,children:[Object(x.jsx)(f,{children:h("delete.action.cancel")}),Object(x.jsx)(j.a,{disabled:o,variant:"contained",fullWidth:!0,size:"large",type:"submit",sx:{color:"common.white"},children:o?Object(x.jsx)(u.a,{size:25}):h("password.action.save")})]})]})})]})},pt=n(25),Ot=n.n(pt),ht=n(34),mt=n(474),xt=n(348),ft=n.n(xt),vt=n(55),gt=n.n(vt),yt=n(473),wt=n(235),St=n.n(wt),kt=n(519),It=Object(h.a)("div")((function(){return{margin:"0 auto 80px",position:"relative",width:216,".files-dropzone::after":{content:"'Drop files here'",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:ne.typography.fontFamily,position:"absolute",inset:0,fontSize:ne.typography.h6.fontSize,borderRadius:"50%",backgroundColor:"transparent",color:"transparent",transition:"background-color ".concat(ne.transitions.duration.shorter,"ms ").concat(ne.transitions.easing.easeInOut,", color ").concat(ne.transitions.duration.shorter,"ms ").concat(ne.transitions.easing.easeInOut," ")},".files-dropzone-active::after":{color:ne.palette.common.white,backgroundColor:ne.palette.text.disabled}}})),Ct=Object(h.a)(kt.a)((function(){return{width:216,height:216}})),Tt=(Object(h.a)("input")((function(){return{display:"none"}})),Object(h.a)("div")((function(){return{position:"absolute",bottom:"5%",right:"5%",background:ne.palette.secondary.main,borderRadius:"50%",zIndex:4,border:"2px solid ".concat(ne.palette.common.white),cursor:"pointer","& svg":{fill:ne.palette.common.white}}}))),zt=function(e){var t=e.url,n=e.handleChangeImg,a=Object(M.b)().enqueueSnackbar,r=Object(v.a)(["profile","validation"]),i=Object(s.a)(r,1)[0],c=function(e){var t=e.code;a(i("file.errors.".concat(t-1)),{variant:"error"})};return Object(x.jsx)(It,{children:Object(x.jsx)(St.a,{accepts:["image/*"],multiple:!1,maxFileSize:2e6,clickable:!1,onChange:n,onError:c,children:Object(x.jsxs)(b.a,{position:"relative",width:"fit-content",children:[Object(x.jsx)(Ct,{alt:"Avatar image",src:t}),Object(x.jsx)(Tt,{children:Object(x.jsx)(St.a,{accepts:["image/*"],multiple:!1,maxFileSize:2e6,onChange:n,onError:c,children:Object(x.jsx)(V.a,{color:"inherit","aria-label":i("edit.form.file.uploadAria"),component:"span",size:"large",children:Object(x.jsx)(yt.a,{})})})})]})})})},Ft="/image-upload",Dt=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),c=Object(s.a)(i,2),o=c[0],p=c[1],O=P(),h=Object(s.a)(O,2),m=h[0],g=h[1],y=g.isSuccess,w=g.isError,k=g.data,I=Object(Te.d)(),C=Object(M.b)().enqueueSnackbar,T=Object(Te.e)((function(e){return e.user})),z=Object(r.useState)((null===T||void 0===T?void 0:T.avatarUrl)||void 0),F=Object(s.a)(z,2),D=F[0],A=F[1],q=Object(v.a)(["profile","validation"]),B=Object(s.a)(q,1)[0],E=Object(ut.b)({defaultValues:{fullname:null===T||void 0===T?void 0:T.fullname,email:null===T||void 0===T?void 0:T.email,birthdate:(null===T||void 0===T?void 0:T.birthdate)||"",phone:(null===T||void 0===T?void 0:T.phone)||""},mode:"all"}),W=E.handleSubmit,R=E.control,_=E.setValue,L=E.register,U=E.formState.errors,H=function(){var e=Object(ht.a)(Ot.a.mark((function e(t){var n,r,i;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(le.a)({},t),e.prev=1,a(!0),r=null,null===o){e.next=10;break}return e.next=7,gt.a.post("".concat(S).concat(Ft),o);case 7:i=e.sent,console.log(i),i&&i.data.links&&1===i.data.links.length&&(r=i.data.links[0]);case 10:null!==r&&(n.avatarUrl=r),m(n),a(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),C(B("edit.errorMsg"),{variant:"error"});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){y&&C(B("edit.successMsg"),{variant:"success"}),w&&C(B("edit.errorMsg"),{variant:"error"}),k&&I(Ke(k))}),[y,w,k]),Object(x.jsxs)(b.a,{component:"main",maxWidth:400,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:B("edit.heading")}),Object(x.jsx)(zt,{url:D,handleChangeImg:function(e){var t=new FormData;e&&e.length>0&&e[0].preview.url?(A(e[0].preview.url),t.append("avatar",e[0]),p(t)):p(null)}}),Object(x.jsx)(b.a,{component:"form",onSubmit:W(H),children:Object(x.jsxs)(d.a,{spacing:2.5,children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:B("edit.input.fullname")},L("fullname",{required:B("common.required")})),{},{error:!!U.fullname,helperText:!!U.fullname&&U.fullname.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"email",size:"small",label:B("edit.input.email")},L("email",{required:B("common.required"),minLength:{value:3,message:B("common.minLength",{min:"3"})},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:B("common.invalidFormat",{format:"email"})}})),{},{error:!!U.email,helperText:!!U.email&&U.email.message})),Object(x.jsx)(ut.a,{name:"birthdate",control:R,render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(mt.a,{inputFormat:"dd-MM-yyyy",mask:"__-__-____",label:B("edit.input.birthdate"),onChange:function(e){return _("birthdate",(null===e||void 0===e?void 0:e.toString())||"",{shouldValidate:!0,shouldDirty:!0})},value:t.value,maxDate:new Date,minDate:new Date("1900-01-01"),renderInput:function(e){return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)(Object(le.a)({},e),t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message,fullWidth:!0,size:"small"}))}})}}),Object(x.jsx)(ut.a,{name:"phone",control:R,rules:{pattern:{value:/^$|^___-___-___$|^[0-9]{3}-[0-9]{3}-[0-9]{3}$/,message:B("validation:common.invalidFormat",{format:"phone number"})}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(ft.a,Object(le.a)(Object(le.a)({},Object(le.a)(Object(le.a)({},t),{},{error:n})),{},{mask:"999-999-999",children:function(e){var t;return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({},e),{},{fullWidth:!0,label:B("edit.input.phonenumber"),type:"tel",size:"small",error:!!e.error,helperText:null===(t=e.error)||void 0===t?void 0:t.message}))}}))}}),Object(x.jsxs)(d.a,{direction:"row",spacing:2.5,children:[Object(x.jsx)(f,{children:B("delete.action.cancel")}),Object(x.jsx)(j.a,{disabled:n,variant:"contained",fullWidth:!0,size:"large",type:"submit",sx:{color:"common.white"},children:n?Object(x.jsx)(u.a,{size:25}):B("edit.action.save")})]})]})})]})},At=n(420),qt=n(504),Bt=n(520),Et="/profile",Wt=gt.a.create({baseURL:S,headers:{Authorization:"Bearer ".concat(F())}}),Pt=function(e){var t=e.children,n=Object(Te.d)(),a=Object(R.g)(),i=Object(r.useState)(null),c=Object(s.a)(i,2),o=c[0],l=c[1],d=function(){var e=Object(ht.a)(Ot.a.mark((function e(){var t,r;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,Wt.get(Et);case 4:t=e.sent,r=t.data,n(Ke(r.user)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),D(a.push);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){z()&&d()}),[]),!z()||z()&&!1===o?Object(x.jsx)("div",{children:t}):Object(x.jsx)(b.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(u.a,{})})},Mt=n(506),Rt=n(126),_t={"pl-pl":Mt.a,"en-us":Rt.a},Lt=function(e){var t=e.children,n=Object(v.a)(),a=Object(s.a)(n,2)[1].language;return Object(x.jsx)(Pt,{children:Object(x.jsx)(M.a,{children:Object(x.jsx)(At.b,{dateAdapter:qt.a,locale:_t[a],children:Object(x.jsx)(Bt.a,{theme:ne,children:t})})})})},Ut=n(477),Ht=function(){var e=Object(ut.b)({mode:"onChange"}),t=e.register,n=e.handleSubmit,a=e.formState,r=a.errors,i=a.isDirty,c=a.isValid,o=Object(R.g)(),l=Object(R.j)().url,d=Object(v.a)("login"),j=Object(s.a)(d,1)[0],u=function(){var e=Object(ht.a)(Ot.a.mark((function e(t){var n;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.a.post("".concat(S,"/auth/checkemail"),t);case 2:(n=e.sent).data.exist?o.push({pathname:"".concat(l,"/signin"),state:n.data.email}):o.push({pathname:"".concat(l,"/signup"),state:n.data.email});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("form",{onSubmit:n(u),children:Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:j("form.email.label"),InputProps:{endAdornment:Object(x.jsx)(V.a,{edge:"end",type:"submit",color:"primary",disabled:!i||!c,children:Object(x.jsx)(Ut.a,{})})}},t("email",{required:{value:!0,message:j("form.email.validation.required")},minLength:{value:3,message:j("form.email.validation.minLength")},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:j("form.email.validation.pattern")}})),{},{error:!!r.email,helperText:r.email&&r.email.password}))})},Nt=n(478),Vt=n(479),Qt="/business/salons",Gt=function(e){return"/business/salon/".concat(e,"/info")},Zt=function(e){return"/business/salon/".concat(e,"/schedule")},$t=function(e){return"/business/salon/".concat(e,"/portfolio")},Jt=function(e){return"/business/salon/".concat(e,"/crew")},Kt=function(e){return"/business/salon/".concat(e,"/service")},Yt=function(e){return"/business/salon/".concat(e)},Xt="/business/salon",en=Object(y.a)({reducerPath:"adminPanelApi",baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),tagTypes:["SalonDetails"],endpoints:function(e){return{fetchAllSalons:e.query({query:function(){return"".concat(Qt)}}),fetchSalonData:e.query({query:function(e){var t=e.salonId;return"".concat(Gt(t))},transformResponse:function(e){return e.salon},providesTags:["SalonDetails"]}),fetchSalonSchedule:e.query({query:function(e){var t=e.salonId;return"".concat(Zt(t))}}),fetchSalonPortfolio:e.query({query:function(e){var t=e.salonId;return"".concat($t(t))}}),addCrewMember:e.mutation({query:function(e){var t=e.salonId,n=e.avatarUrl,a=e.fullname;return{url:"".concat(Jt(t)),method:"post",body:{imageUrl:n,name:a}}},invalidatesTags:["SalonDetails"]}),addService:e.mutation({query:function(e){var t=e.salonId,n=e.name,a=e.price,r=e.duration,i=e.description;return{url:"".concat(Kt(t)),method:"post",body:{name:n,price:a,duration:r,description:i}}},invalidatesTags:["SalonDetails"]}),updateSalon:e.mutation({query:function(e){var t=e.salonId,n=e.salon;return{url:"".concat(Yt(t)),method:"PATCH",body:{name:n.name,address:n.address,city:n.city,contact:{phone:n.phone,email:n.email},description:n.description}}},invalidatesTags:["SalonDetails"]}),createSalon:e.mutation({query:function(e){return{url:Xt,method:"post",body:Object(le.a)({},e)}},invalidatesTags:["SalonDetails"]})}}}),tn=en.useFetchAllSalonsQuery,nn=en.useFetchSalonDataQuery,an=en.useFetchSalonPortfolioQuery,rn=en.useFetchSalonScheduleQuery,cn=en.useAddCrewMemberMutation,on=en.useAddServiceMutation,sn=en.useUpdateSalonMutation,ln=en.useCreateSalonMutation,dn=function(e){return"/salons/".concat(e)},jn="/salons/service",un="/salons/rating",bn="/salons/freehours",pn="/salons/reservation",On=Object(y.a)({reducerPath:"salonApi",tagTypes:["Salon","Reservation"],baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),endpoints:function(e){return{fetchSpecifiedSalonData:e.query({query:function(e){var t=e.salonId;return{url:"".concat(dn(t))}},transformResponse:function(e){return e.salon},providesTags:["Salon"]}),addReview:e.mutation({query:function(e){return{url:"".concat(un),method:"POST",body:e}},invalidatesTags:["Salon"]}),fetchService:e.query({query:function(e){return{url:jn,method:"POST",body:e}}}),getFreeHours:e.query({query:function(e){return{url:"".concat(bn),method:"POST",body:e}},providesTags:["Reservation"]}),confirmReservation:e.mutation({query:function(e){return{url:"".concat(pn),method:"POST",body:e}},invalidatesTags:["Reservation"]})}}}),hn=On.useFetchSpecifiedSalonDataQuery,mn=On.useAddReviewMutation,xn=On.useFetchServiceQuery,fn=On.useLazyGetFreeHoursQuery,vn=On.useConfirmReservationMutation,gn=Object(ze.a)({reducer:(lt={user:et,salonsFilters:Ae},Object(Y.a)(lt,en.reducerPath,en.reducer),Object(Y.a)(lt,q.reducerPath,q.reducer),Object(Y.a)(lt,ye.reducerPath,ye.reducer),Object(Y.a)(lt,On.reducerPath,On.reducer),lt),middleware:function(e){return e().concat(en.middleware,On.middleware,ye.middleware,q.middleware)}}),yn=function(){return Object(Te.d)()},wn=gn,Sn=Object(h.a)("form")((function(){return{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1}})),kn=Object(h.a)(j.a)((function(){return{marginTop:ne.spacing(2)}})),In=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(R.h)(),c=Object(R.g)(),o=yn(),l=Object(v.a)("login"),d=Object(s.a)(l,1)[0],j=Object(ut.b)({mode:"onBlur",defaultValues:{email:i.state,password:""}}),u=j.register,b=j.handleSubmit,p=j.formState,O=p.errors,h=p.isDirty,m=p.isValid,f=function(){var e=Object(ht.a)(Ot.a.mark((function e(t){var n;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt.a.post("".concat(S,"/auth/signin"),t);case 3:n=e.sent,localStorage.setItem("JWT_TOKEN",n.data.token),o(Ke(n.data.user)),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.error.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(Sn,{onSubmit:b(f),children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:d("form.email.label"),margin:"normal"},u("email",{required:{value:!0,message:d("form.email.validation.required")},minLength:{value:3,message:d("form.email.validation.minLength")},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:d("form.email.validation.pattern")}})),{},{error:!!O.email,helperText:!!O.email&&O.email.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:n?"text":"password",size:"small",label:d("form.password.label"),margin:"normal",InputProps:{endAdornment:Object(x.jsx)(V.a,{edge:"end",onClick:function(){a(!n)},children:n?Object(x.jsx)(Nt.a,{}):Object(x.jsx)(Vt.a,{})})}},u("password",{required:{value:!0,message:d("form.password.validation.required")},minLength:{value:8,message:d("form.password.validation.minLength")}})),{},{error:!!O.password,helperText:!!O.password&&O.password.message})),Object(x.jsx)(kn,{type:"submit",variant:"contained",disableElevation:!0,disabled:!h||!m,children:d("form.signInButton.label")})]})},Cn=n(470),Tn=n(480),zn=n(544),Fn=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(R.h)(),c=Object(R.g)(),o=yn(),l=Object(v.a)("login"),d=Object(s.a)(l,1)[0],j=Object(ut.b)({mode:"onBlur",defaultValues:{fullname:"",email:i.state,password:"",role:""}}),u=j.register,b=j.handleSubmit,p=j.formState,O=p.errors,h=p.isDirty,m=p.isValid,f=function(){var e=Object(ht.a)(Ot.a.mark((function e(t){var n;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt.a.post("".concat(S,"/auth/signup"),t);case 3:n=e.sent,localStorage.setItem("JWT_TOKEN",n.data.token),o(Ke(n.data.user)),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.error.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(Sn,{onSubmit:b(f),children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:"Fullname",margin:"normal"},u("fullname",{required:{value:!0,message:"Field is required"},minLength:{value:3,message:"Field should contains at least 3 characters"}})),{},{error:!!O.fullname,helperText:!!O.fullname&&O.fullname.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:d("form.email.label"),margin:"normal"},u("email",{required:{value:!0,message:d("form.email.validation.required")},minLength:{value:3,message:d("form.email.validation.minLength")},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:d("form.email.validation.pattern")}})),{},{error:!!O.email,helperText:!!O.email&&O.email.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:n?"text":"password",size:"small",label:d("form.password.label"),margin:"normal",InputProps:{endAdornment:Object(x.jsx)(V.a,{edge:"end",onClick:function(){a(!n)},children:n?Object(x.jsx)(Nt.a,{}):Object(x.jsx)(Vt.a,{})})}},u("password",{required:{value:!0,message:d("form.password.validation.required")},minLength:{value:8,message:d("form.password.validation.minLength")}})),{},{error:!!O.password,helperText:!!O.password&&O.password.message})),Object(x.jsxs)(ue.a,{component:"fieldset",children:[Object(x.jsx)(Cn.a,{component:"legend",children:"Account type"}),Object(x.jsxs)(Tn.a,{name:"account-type",defaultValue:ce.Standard,children:[Object(x.jsx)(zn.a,Object(le.a)({value:ce.Standard,control:Object(x.jsx)(Z.a,{}),label:"Standard"},u("role",{required:!0}))),Object(x.jsx)(zn.a,Object(le.a)({value:ce.Business,control:Object(x.jsx)(Z.a,{}),label:"Business"},u("role",{required:!0})))]})]}),Object(x.jsx)(kn,{type:"submit",variant:"contained",disableElevation:!0,disabled:!h||!m,children:d("form.signInButton.label")})]})},Dn=Object(h.a)(L.a)((function(){return{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}})),An=function(){var e=Object(R.j)().path;return Object(x.jsx)(Dn,{children:Object(x.jsxs)(H.a,{container:!0,justifyContent:"center",children:[Object(x.jsx)(H.a,{item:!0,xs:12,container:!0,justifyContent:"center",rowSpacing:10,children:Object(x.jsx)(l.a,{variant:"h3",component:"h1",children:"Voirsy"})}),Object(x.jsx)(H.a,{item:!0,xs:12,sm:6,lg:4,container:!0,justifyContent:"center",children:Object(x.jsxs)(R.d,{children:[Object(x.jsx)(R.b,{exact:!0,path:"/login",children:Object(x.jsx)(Ht,{})}),Object(x.jsx)(R.b,{path:"".concat(e,"/signin"),children:Object(x.jsx)(In,{})}),Object(x.jsx)(R.b,{path:"".concat(e,"/signup"),children:Object(x.jsx)(Fn,{})})]})})]})})},qn=Object(h.a)(b.a)((function(){var e;return e={display:"flex",alignItems:"center",justifyContent:"center",height:"calc(100vh - ".concat(ne.mixins.toolbar.minHeight,"px)")},Object(Y.a)(e,ne.breakpoints.up("sm"),{height:"calc(100vh - ".concat(ne.mixins.toolbar["@media (min-width:600px)"].minHeight,"px)")}),Object(Y.a)(e,"@media (orientation: landscape)",{height:"calc(100vh - ".concat(ne.mixins.toolbar["@media (min-width:0px) and (orientation: landscape)"].minHeight,"px)")}),e})),Bn=function(){return Object(x.jsx)(qn,{children:Object(x.jsx)(u.a,{})})},En=(Object(h.a)(b.a)((function(){return{display:"flex",justifyContent:"space-between",alignItems:"center"}})),Object(h.a)(b.a)((function(){return Object(Y.a)({display:"none"},ne.breakpoints.up("md"),{display:"block",minWidth:"250px",maxWidth:"250px"})}))),Wn=n(512),Pn=n(545),Mn=function(){var e=Object(R.i)().salonId,t=Object(N.a)(ne.breakpoints.down("md")),n=Object(R.j)(["/salons/:salonId/calendar","/salons/:salonId/portfolio","/salons/:salonId/details"]),a=null===n||void 0===n?void 0:n.path,r=Object(v.a)("admin"),i=Object(s.a)(r,1)[0];return Object(x.jsxs)(Wn.a,{"aria-label":i("salonTemplate.nav.aria"),value:a,variant:t?"fullWidth":"standard",children:[Object(x.jsx)(Pn.a,{component:p.b,label:i("salonTemplate.nav.details"),value:"/salons/:salonId/details",to:"/salons/".concat(e,"/details")}),Object(x.jsx)(Pn.a,{component:p.b,label:i("salonTemplate.nav.calendar"),value:"/salons/:salonId/calendar",to:"/salons/".concat(e,"/calendar")}),Object(x.jsx)(Pn.a,{component:p.b,label:i("salonTemplate.nav.portfolio"),value:"/salons/:salonId/portfolio",to:"/salons/".concat(e,"/portfolio")})]})},Rn=n(481),_n=n(482),Ln=n(483),Un=n(546),Hn=n(547),Nn=n(360),Vn=Object(h.a)(Un.a)((function(){return{justifyContent:"flex-end"}})),Qn=Object(h.a)(Hn.a)((function(){var e;return e={},Object(Y.a)(e,ne.breakpoints.down("md"),{".MuiDrawer-paper":{width:"100%"}}),Object(Y.a)(e,".MuiDrawer-paper",{border:0}),e})),Gn=Object(h.a)(Nn.a,{shouldForwardProp:function(e){return"active"!==e}})((function(e){var t=e.active;return{padding:ne.spacing(1),"& a":{textDecoration:"none",color:t?ne.palette.primary.main:ne.palette.text.primary}}})),Zn=function(e){var t=e.data,n=Object(v.a)(["admin","common"]),a=Object(s.a)(n,1)[0],r=Object(R.i)().salonId;return Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(l.a,{variant:"h5",children:a("salonTemplate.heading.mySalons")}),Object(x.jsx)(p.b,{to:"/salons/create-salon",children:Object(x.jsx)(j.a,{variant:"outlined",color:"primary",endIcon:Object(x.jsx)(Rn.a,{}),size:"large",children:a("salonTemplate.addSalon")})}),t.salons.length>0&&t.salons.map((function(e){var t=e._id,n=e.name,i=e.address,c=e.city,o=e.type;return Object(x.jsx)(Gn,{active:r===t,variant:"outlined",children:Object(x.jsxs)(p.b,{to:"/salons/".concat(t,"/details"),children:[Object(x.jsx)(l.a,{variant:"subtitle1",noWrap:!0,children:n}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,alignItems:"center",color:ne.palette.text.secondary,children:[Object(x.jsx)(_n.a,{}),Object(x.jsx)(l.a,{variant:"body2",noWrap:!0,children:i})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,alignItems:"center",color:ne.palette.text.secondary,children:[Object(x.jsx)(Ln.a,{}),Object(x.jsx)(l.a,{variant:"body2",noWrap:!0,children:c})]}),Object(x.jsx)(d.a,{direction:"row",spacing:.5,alignItems:"center",marginTop:1,children:o.map((function(e,t){return Object(x.jsx)(oe.a,{size:"small",color:"secondary",label:a("common:salonType.".concat(e.toLowerCase()))},t)}))})]})},t)}))]})},$n=function(e){var t=e.children,n=Object(v.a)("admin"),a=Object(s.a)(n,1)[0],i=tn(),c=i.data,o=void 0===c?{salons:[],message:""}:c,j=i.isFetching,u=i.isError,p=Object(R.g)();return Object(r.useEffect)((function(){!1===j&&o.salons.length&&p.replace("/salons/".concat(o.salons[0]._id,"/details"))}),[j]),j?Object(x.jsx)(Bn,{}):u?Object(x.jsx)(l.a,{variant:"h5",textAlign:"center",marginTop:5,children:a("salonTemplate.error")}):Object(x.jsx)(L.a,{maxWidth:!1,children:Object(x.jsxs)(d.a,{direction:"row",spacing:2,children:[Object(x.jsx)(En,{children:Object(x.jsx)(Zn,{data:o})}),Object(x.jsx)(b.a,{display:"flex",flexDirection:"column",flexGrow:1,children:o.salons.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Mn,{}),t]}):Object(x.jsx)(b.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(l.a,{variant:"h5",textAlign:"center",children:Object(x.jsx)(g.a,{defaults:a("salonTemplate.noSalons"),components:[Object(x.jsx)("br",{},"breakLine")]})})})})]})})},Jn=n(485),Kn=n(486),Yn=n(539),Xn=n(529),ea=n(521),ta=n(550),na=n(522),aa=n(551),ra=n(552),ia=n(484),ca=n(475),oa=n(548),sa=n(542),la=n(543),da=function(e){var t,n=e.open,a=e.close,i=Object(ut.b)({mode:"all"}),c=i.register,o=i.handleSubmit,l=i.setValue,u=i.formState,b=u.errors,p=u.isDirty,O=u.isValid,h=Object(R.i)().salonId,m=cn(),f=Object(s.a)(m,2),g=f[0],y=f[1],w=y.isSuccess,k=y.isError,I=Object(v.a)("admin"),C=Object(s.a)(I,1)[0],T=Object(r.useState)(void 0),z=Object(s.a)(T,2),F=z[0],D=z[1],A=Object(M.b)().enqueueSnackbar;Object(r.useEffect)((function(){return w&&A(C("crewDialog.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),k&&A(C("crewDialog.operationError"),{variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),function(){a(),D(void 0)}}),[w,k]);var q=function(){var e=Object(ht.a)(Ot.a.mark((function e(t){var n,a,r,i;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.fullname,a="",!t.avatar){e.next=15;break}return(r=new FormData).append("avatar",t.avatar),e.prev=5,e.next=8,gt()({method:"post",url:"".concat(S,"/image-upload"),data:r,headers:{"Content-Type":"multipart/form-data"}});case 8:i=e.sent,a=i.data.links[0],e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:g({salonId:h,avatarUrl:a,fullname:n});case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(ca.a,{open:n,maxWidth:"md",fullWidth:!0,children:[Object(x.jsx)(oa.a,{children:Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[C("admin:crewDialog.title"),Object(x.jsx)(V.a,{onClick:a,children:Object(x.jsx)(ia.a,{})})]})}),Object(x.jsx)(sa.a,{children:Object(x.jsx)(H.a,{container:!0,justifyContent:"center",paddingTop:3,children:Object(x.jsx)(H.a,{item:!0,xs:8,children:Object(x.jsx)("form",{children:Object(x.jsxs)(d.a,{spacing:2,direction:"row",alignItems:"center",children:[Object(x.jsx)("input",{type:"file",id:"avatar-image-upload",accept:"image/png, image/jpeg",onChange:function(e){return function(e){var t,n,a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],r=URL.createObjectURL(a);l("avatar",a),D(r)}(e)},hidden:!0}),Object(x.jsx)("label",{htmlFor:"avatar-image-upload",children:Object(x.jsx)(kt.a,{sx:{width:48,height:48},src:F})}),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:C("admin:crewDialog.fullname")},c("fullname",{required:{value:!0,message:C("crewDialog.form.required")}})),{},{sx:{flexGrow:1},error:!!b.fullname,helperText:null===(t=b.fullname)||void 0===t?void 0:t.message}))]})})})})}),Object(x.jsx)(la.a,{sx:{padding:ne.spacing(2,3)},children:Object(x.jsx)(j.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!p||!O,onClick:o(q),children:C("admin:confirmButton")})})]})},ja=Object(h.a)(Nn.a)((function(){return{padding:ne.spacing(1),flexGrow:1}})),ua=function(e){var t,n,a,i,c=e.open,o=e.close,l=Object(ut.b)({mode:"all"}),u=l.register,b=l.handleSubmit,p=l.formState,O=p.errors,h=p.isDirty,m=p.isValid,f=Object(v.a)("admin"),g=Object(s.a)(f,1)[0],y=on(),w=Object(s.a)(y,2),S=w[0],k=w[1],I=k.isSuccess,C=k.isError,T=Object(R.i)().salonId,z=Object(M.b)().enqueueSnackbar;return Object(r.useEffect)((function(){return I&&z(g("serviceDialog.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),C&&z(g("serviceDialog.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),function(){return o()}}),[I,C]),Object(x.jsxs)(ca.a,{open:c,maxWidth:"md",fullWidth:!0,children:[Object(x.jsx)(oa.a,{children:Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[g("admin:serviceDialog.title"),Object(x.jsx)(V.a,{onClick:o,children:Object(x.jsx)(ia.a,{})})]})}),Object(x.jsx)(sa.a,{children:Object(x.jsx)(H.a,{container:!0,justifyContent:"center",paddingTop:3,children:Object(x.jsx)(H.a,{item:!0,xs:8,children:Object(x.jsx)("form",{children:Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.name")},u("name")),{},{error:!!O.name,helperText:null===(t=O.name)||void 0===t?void 0:t.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.price"),type:"number"},u("price")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"\u20ac"}),inputProps:{min:0}},error:!!O.price,helperText:null===(n=O.price)||void 0===n?void 0:n.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.duration"),type:"number",multiline:!0,maxRows:4},u("duration")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"min"}),inputProps:{min:0,step:1}},error:!!O.duration,helperText:null===(a=O.duration)||void 0===a?void 0:a.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.description")},u("description")),{},{error:!!O.description,helperText:null===(i=O.description)||void 0===i?void 0:i.message}))]})})})})}),Object(x.jsx)(la.a,{sx:{padding:ne.spacing(2,3)},children:Object(x.jsx)(j.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!h||!m,onClick:b((function(e){S(Object(le.a)({salonId:T},e))})),children:g("admin:confirmButton")})})]})},ba=function(){var e=Object(R.i)().salonId,t=nn({salonId:e}),n=t.data,a=t.isFetching,i=Object(ut.b)(),c=i.register,o=i.handleSubmit,p=i.setValue,O=i.formState,h=O.isDirty,m=O.isValid,f=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.currency})),g=Object(r.useState)(!1),y=Object(s.a)(g,2),w=y[0],S=y[1],k=Object(r.useState)(!1),I=Object(s.a)(k,2),C=I[0],T=I[1],z=Object(v.a)("admin"),F=Object(s.a)(z,1)[0],D=ke().data,A=Object(r.useState)(""),q=Object(s.a)(A,2),B=q[0],E=q[1],W=sn(),P=Object(s.a)(W,2),_=P[0],L=P[1],U=L.isSuccess,N=L.isError,Q=Object(M.b)().enqueueSnackbar;Object(r.useEffect)((function(){a||(p("name",null===n||void 0===n?void 0:n.name,{shouldDirty:!1}),p("address",null===n||void 0===n?void 0:n.address,{shouldDirty:!1}),p("city",null===n||void 0===n?void 0:n.city,{shouldDirty:!1}),p("phone",null===n||void 0===n?void 0:n.phone,{shouldDirty:!1}),p("email",null===n||void 0===n?void 0:n.email,{shouldDirty:!1}),p("description",null===n||void 0===n?void 0:n.description,{shouldDirty:!1}),E(null===n||void 0===n?void 0:n.city))}),[n,a]),Object(r.useEffect)((function(){return U&&Q(F("details.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),N&&Q(F("details.operationError"),{variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),function(){return close()}}),[U,N]);return a?Object(x.jsx)(b.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(u.a,{})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(H.a,{container:!0,spacing:2,paddingY:2,children:[Object(x.jsx)(H.a,{item:!0,container:!0,direction:"column",xs:12,lg:6,children:Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsxs)(ja,{variant:"outlined",children:[Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",marginBottom:2,children:[Object(x.jsx)(l.a,{component:"h3",variant:"h6",children:F("details.informations.title")}),Object(x.jsx)(j.a,{variant:"text",size:"small",disabled:!h||!m,onClick:o((function(t){_({salonId:e,salon:t})})),children:F("confirmButton")})]}),Object(x.jsx)("form",{children:Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:F("details.informations.salonName"),size:"small"},c("name"))),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:F("details.informations.address"),size:"small"},c("address"))),Object(x.jsxs)(ue.a,{children:[Object(x.jsx)(Yn.a,{id:"select-label",children:F("details.informations.city")}),Object(x.jsx)(je.a,{labelId:"select-label",size:"small",value:B,onChange:function(e){return function(e){var t=e.target.value;p("city",t,{shouldDirty:!0}),E(t)}(e)},variant:"outlined",children:null===D||void 0===D?void 0:D.cities.map((function(e){return Object(x.jsx)(G.a,{value:e._id,sx:{textTransform:"capitalize"},children:Object(x.jsx)($.a,{primary:e.name})},e._id)}))})]}),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:F("details.informations.phone"),size:"small"},c("phone"))),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:F("details.informations.email"),size:"small"},c("email"))),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:F("details.informations.description"),size:"small",multiline:!0,maxRows:4},c("description")))]})})]}),Object(x.jsxs)(ja,{variant:"outlined",children:[Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(x.jsx)(l.a,{component:"h3",variant:"h6",children:F("details.crew.title")}),Object(x.jsx)(V.a,{size:"small",color:"primary",onClick:function(){return T(!0)},children:Object(x.jsx)(Jn.a,{})})]}),Object(x.jsx)(Xn.a,{children:(null===n||void 0===n?void 0:n.crew)&&n.crew.map((function(e){return Object(x.jsxs)(ea.a,{children:[Object(x.jsx)(ta.a,{children:Object(x.jsx)(kt.a,{src:e.imageUrl})}),Object(x.jsx)($.a,{primary:e.name})]},e._id)}))})]})]})}),Object(x.jsx)(H.a,{item:!0,container:!0,xs:12,lg:6,alignItems:"stretch",children:Object(x.jsxs)(ja,{variant:"outlined",children:[Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",marginBottom:1,children:[Object(x.jsx)(l.a,{component:"h3",variant:"h6",children:F("details.services.title")}),Object(x.jsx)(V.a,{size:"small",color:"primary",onClick:function(){return S(!0)},children:Object(x.jsx)(Jn.a,{})})]}),(null===n||void 0===n?void 0:n.services)&&n.services.map((function(e){return Object(x.jsxs)(na.a,{elevation:0,children:[Object(x.jsx)(aa.a,{expandIcon:Object(x.jsx)(Kn.a,{}),children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)(l.a,{variant:"subtitle1",component:"p",children:e.name}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,color:ne.palette.text.secondary,children:[Object(x.jsx)(l.a,{variant:"body2",component:"p",children:"".concat(F("details.services.price"),": ").concat(e.price," ").concat(f)}),Object(x.jsx)(l.a,{variant:"body2",component:"p",children:"".concat(F("details.services.duration"),": ").concat(e.duration," min")})]})]})}),Object(x.jsx)(ra.a,{children:Object(x.jsx)(l.a,{variant:"body2",component:"p",children:e.description})})]},e._id)}))]})})]}),w&&Object(x.jsx)(ua,{open:w,close:function(){return S(!1)}}),C&&Object(x.jsx)(da,{open:C,close:function(){return T(!1)}})]})},pa=function(){var e=Object(R.i)().salonId,t=an({salonId:e}),n=t.data;return t.isFetching?Object(x.jsx)(b.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(u.a,{})}):Object(x.jsx)(b.a,{p:1.5,children:Object(x.jsx)(l.a,{sx:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(n)})})},Oa=function(){var e=Object(R.i)().salonId,t=rn({salonId:e}),n=t.data;return t.isFetching?Object(x.jsx)(b.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(u.a,{})}):Object(x.jsx)(b.a,{p:1.5,children:Object(x.jsx)(l.a,{sx:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(n)})})},ha=function(){var e=Object(v.a)("profile"),t=Object(s.a)(e,1)[0],n=B(),a=n.data,i=void 0===a?[]:a,c=n.isError,o=n.isFetching,d=n.refetch,j=Object(N.a)(ne.breakpoints.up("lg"));return Object(r.useEffect)((function(){d()}),[]),o?Object(x.jsx)(Bn,{}):c?Object(x.jsx)(l.a,{textAlign:"center",children:t("favorites.error.unknown")}):Object(x.jsxs)(b.a,{component:"main",maxWidth:j?700:380,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:t("favorites.heading")}),i.length>0?Object(x.jsx)(H.a,{container:!0,spacing:2,children:i.map((function(e){return Object(x.jsx)(H.a,{item:!0,xs:12,lg:6,children:Object(x.jsx)(tt,{_id:e._id,address:e.address,city:e.city,imageUrl:e.imageUrl,name:e.name,salonType:e.type,rating:e.rating})},e._id)}))}):Object(x.jsx)(l.a,{variant:"h6",textAlign:"center",children:t("favorites.error.noFavorites")})]})},ma=n(424),xa=n(350),fa=n.n(xa),va=Object(h.a)(U.a)((function(){var e;return e={display:"flex",flexDirection:"column",position:"absolute",inset:0,width:"100%",maxWidth:"1000px",backgroundColor:ne.palette.background.paper,borderRadius:ne.shape.borderRadius,overflowY:"auto",overflowX:"hidden"},Object(Y.a)(e,ne.breakpoints.up("md"),{top:ne.spacing(4),bottom:ne.spacing(4),left:"50%",transform:"translateX(-50%)"}),Object(Y.a)(e,":focus-visible",{outline:"none"}),e})),ga=Object(h.a)(V.a)((function(){return Object(Y.a)({alignSelf:"center",padding:"2px","> svg":{fontSize:"34px"}},ne.breakpoints.up("md"),{"> svg":{fontSize:"46px"}})})),ya=Object(h.a)(l.a)((function(){return Object(Y.a)({fontSize:"18px",fontWeight:ne.typography.fontWeightBold,color:ne.palette.text.primary},ne.breakpoints.up("md"),{fontSize:"28px"})})),wa=Object(h.a)(l.a)((function(){return Object(Y.a)({color:ne.palette.text.primary},ne.breakpoints.up("md"),{fontSize:"14px"})})),Sa=function(e){var t=e.currentTab,n=Object(R.i)().salonId,a=Object(v.a)("salon"),r=Object(s.a)(a,1)[0],i=Object(N.a)(ne.breakpoints.down("md"));return Object(x.jsx)(U.a,{paddingLeft:i?0:2,maxWidth:"100%",children:Object(x.jsxs)(Wn.a,{"aria-label":r("salon:nav.aria"),value:t,variant:i?"fullWidth":"standard",indicatorColor:"secondary",textColor:"secondary",children:[Object(x.jsx)(Pn.a,{component:p.b,label:r("salon:nav.info"),value:"/:salonId",to:"/".concat(n)}),Object(x.jsx)(Pn.a,{component:p.b,label:r("salon:nav.reviews"),value:"/:salonId/reviews",to:"/".concat(n,"/reviews")}),Object(x.jsx)(Pn.a,{component:p.b,label:r("salon:nav.portfolio"),value:"/:salonId/portfolio",to:"/".concat(n,"/portfolio")})]})})},ka=Object(h.a)("img")((function(){return{maxWidth:"100%",marginBottom:ne.spacing(1.5)}})),Ia=Object(h.a)(U.a)((function(){return{borderRadius:ne.shape.borderRadius,border:"1px solid ".concat(ne.palette.grey[300]),padding:ne.spacing(1.25),marginBottom:ne.spacing(1.25)}})),Ca=Object(h.a)(l.a)((function(){return{color:ne.palette.text.secondary,fontSize:ne.typography.overline.fontSize}})),Ta=Object(h.a)(l.a)((function(){return{fontSize:ne.typography.body2.fontSize,marginBottom:ne.spacing(1.25)}})),za=Object(h.a)(l.a)((function(){return{fontWeight:ne.typography.fontWeightBold}})),Fa=n(487);!function(e){e.Monday="monday",e.Tuesday="tuesday",e.Wednesday="wednesday",e.Thursday="thursday",e.Friday="friday",e.Saturday="saturday",e.Sunday="sunday"}(dt||(dt={}));var Da,Aa,qa=function(e){var t=e.openingHours,n=Object(v.a)(),a=Object(s.a)(n,1)[0],r=Object.values(dt).map((function(e){return t.find((function(t){return t.name===e}))||{name:e,open:null,close:null}}));return Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ca,{variant:"button",children:a("salon:details.openingHours.label")}),r.map((function(e){var t=e.name,n=e.open,r=e.close;return Object(x.jsxs)(d.a,{direction:"row",spacing:1.25,justifyContent:"space-between",children:[Object(x.jsx)(l.a,{sx:{textTransform:"capitalize"},children:a("salon:details.openingHours.daysOfTheWeek.".concat(t.toLowerCase()))}),Object(x.jsx)(l.a,{children:n&&r?"".concat(n," - ").concat(r):"closed"})]},t)}))]})},Ba=function(e){var t=e.phone,n=e.openingHours,a=e.description,r=e.crew,i=Object(v.a)(),c=Object(s.a)(i,1)[0];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ca,{variant:"button",children:c("salon:details.contact.label")}),Object(x.jsxs)(d.a,{direction:"row",spacing:1.25,justifyContent:"space-between",children:[Object(x.jsx)(Fa.a,{}),Object(x.jsx)(l.a,{children:t.replace(/ /g,"").split(/(.{3})/).join(" ")})]})]}),Object(x.jsx)(qa,{openingHours:n}),Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ca,{variant:"button",children:c("salon:details.aboutUs.label")}),Object(x.jsx)(l.a,{children:a})]}),r.length>0&&Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ca,{variant:"button",children:c("salon:details.crew.label")}),Object(x.jsx)(d.a,{overflow:"auto",marginTop:1.25,direction:"row",spacing:2,children:r.map((function(e){return Object(x.jsxs)(d.a,{spacing:1,alignItems:"center",width:"fit-content",children:[Object(x.jsx)(kt.a,{src:e.imageUrl,alt:e.name,sx:{width:70,height:70}}),Object(x.jsx)(l.a,{variant:"body1",children:e.name})]},e._id)}))})]})]})},Ea=n(488),Wa=function(e){var t=Object(Ea.a)(e),n="";return 0!==t&&(n+="".concat(t,"h")),n+=" ".concat(e-60*t,"min")},Pa=function(e){var t=e._id,n=e.name,a=e.description,r=e.price,i=e.duration,c=Object(v.a)("salon"),o=Object(s.a)(c,1)[0],u=Object(R.i)().salonId,b=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role})),O=z()&&b===ce.Standard;return Object(x.jsxs)(Ia,{children:[Object(x.jsxs)(d.a,{direction:"row",justifyContent:"space-between",alignItems:"center",marginBottom:1,children:[Object(x.jsxs)(d.a,{direction:"row",children:[Object(x.jsxs)(za,{children:[n,"\xa0"]}),Object(x.jsx)(l.a,{children:"\u2022 ".concat(Wa(i))})]}),Object(x.jsxs)(l.a,{children:[r,"$"]})]}),Object(x.jsxs)(d.a,{direction:"row",justifyContent:"space-between",children:[Object(x.jsx)(l.a,{children:a}),O&&Object(x.jsx)(j.a,{variant:"contained",color:"secondary",size:"small",component:p.b,to:"/".concat(u,"/reservation/").concat(t),children:o("salon:bookButton.label")})]})]})},Ma=function(e){var t=e.description,n=e.imageUrl,a=e.phone,r=e.openingHours,i=e.services,c=e.crew,o=Object(N.a)(ne.breakpoints.down("md")),l=Object(v.a)("salon"),j=Object(s.a)(l,1)[0];return Object(x.jsxs)(d.a,{direction:o?"column":"row",spacing:1.5,children:[Object(x.jsxs)(U.a,{width:"100%",children:[Object(x.jsx)(ka,{src:n,alt:j("salon:salonImg.alt"),sx:{borderRadius:1}}),Object(x.jsx)(U.a,{sx:{display:o?"block":"none"},children:Object(x.jsx)(Ba,{description:t,phone:a,openingHours:r,crew:c})}),Object(x.jsxs)("div",{children:[Object(x.jsx)(Ta,{variant:"button",paragraph:!0,children:j("salon:details.ourServices.label")}),Object(x.jsx)("div",{children:i.map((function(e){return Object(x.jsx)(Pa,Object(le.a)({},e),e._id)}))})]})]}),Object(x.jsx)(U.a,{sx:{display:o?"none":"block",minWidth:"300px",width:"300px"},children:Object(x.jsx)(Ba,{description:t,phone:a,openingHours:r,crew:c})})]})},Ra=n(489),_a=n(490),La=n(513),Ua=n(417),Ha=Object(h.a)(l.a)((function(){return{fontSize:ne.typography.h3.fontSize,color:ne.palette.grey[400],textAlign:"center"}})),Na=Object(h.a)("div")((function(){return{svg:{width:"80px",height:"80px",fill:ne.palette.grey[400]}}})),Va=function(e){var t=e.icon,n=e.text;return Object(x.jsx)(U.a,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsxs)(d.a,{spacing:1.25,alignItems:"center",children:[Object(x.jsx)(Na,{children:t}),Object(x.jsx)(Ha,{children:n})]})})},Qa=n(553),Ga=Object(h.a)(Qa.a)((function(){return{position:"absolute",bottom:ne.spacing(3),right:ne.spacing(3)}})),Za=Object(h.a)(Nn.a)((function(){return{padding:ne.spacing(2),height:"calc(100% - ".concat(ne.spacing(4),")")}})),$a=Object(h.a)(U.a)((function(){return{position:"absolute",zIndex:ne.zIndex.modal+1,background:"white",bottom:0,left:0,right:0,borderTop:"1px solid ".concat(ne.palette.grey[300]),padding:ne.spacing(2)}})),Ja=n(354),Ka=function(e){var t=e.reviews,n=void 0===t?[]:t,a=Object(v.a)("salon"),i=Object(s.a)(a,1)[0],c=Object(Te.e)((function(e){return e.user})),o=Object(R.i)().salonId,u=n.find((function(e){return e.authorId===(null===c||void 0===c?void 0:c.id)})),b=Object(r.useState)(!1),p=Object(s.a)(b,2),O=p[0],h=p[1],m=Object(r.useState)(""),f=Object(s.a)(m,2),g=f[0],y=f[1],w=Object(r.useState)(null),S=Object(s.a)(w,2),k=S[0],I=S[1],C=mn(),T=Object(s.a)(C,2),F=T[0],D=T[1],A=D.isError,q=D.isSuccess,B=Object(M.b)().enqueueSnackbar,E=z()&&(null===c||void 0===c?void 0:c.role)!==ce.Business&&!u&&!O;return Object(r.useEffect)((function(){A&&B(i("salon:reviews.errorMsg"),{variant:"error"}),q&&B(i("salon:reviews.successMsg"),{variant:"success"})}),[A,q]),Object(x.jsxs)(x.Fragment,{children:[0===n.length?Object(x.jsx)(Va,{text:i("salon:reviews.noReviews"),icon:Object(x.jsx)(Ra.a,{})}):Object(x.jsx)(H.a,{container:!0,spacing:2.5,children:n.map((function(e){return Object(x.jsx)(H.a,{item:!0,xs:12,md:6,children:Object(x.jsxs)(Za,{children:[Object(x.jsxs)(d.a,{direction:"row",justifyContent:"space-between",marginBottom:1,children:[Object(x.jsxs)(d.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[Object(x.jsx)(kt.a,{alt:e.name,src:e.avatarUrl}),Object(x.jsx)($.a,{primary:e.name,secondary:Object(Ja.a)(new Date(e.date),"dd MMM y")})]}),Object(x.jsx)(La.a,{name:"Salon rating",value:parseInt(e.rating,10),readOnly:!0})]}),Object(x.jsx)(l.a,{variant:"body1",children:e.description})]})},e.authorId)}))}),E&&Object(x.jsx)(Ga,{size:"medium",color:"secondary","aria-label":"add comment",onClick:function(){return h(!0)},children:Object(x.jsx)(Ra.a,{})}),Object(x.jsx)(Ua.a,{in:O,children:Object(x.jsxs)($a,{children:[Object(x.jsx)(V.a,{onClick:function(){return h(!1)},sx:{position:"absolute",top:4,right:4},children:Object(x.jsx)(_a.a,{})}),Object(x.jsxs)(d.a,{spacing:2.5,alignItems:"center",children:[Object(x.jsx)(l.a,{variant:"h5",children:i("salon:reviews.addReviewForm.title")}),Object(x.jsx)(La.a,{value:k,onChange:function(e,t){return I(t)}}),Object(x.jsx)(it.a,{label:i("salon:reviews.addReviewForm.textfield"),variant:"filled",value:g,onChange:function(e){return y(e.target.value)}}),Object(x.jsx)(j.a,{variant:"contained",color:"secondary",size:"large",sx:{width:"144px"},onClick:function(){null!==k&&""!==g&&F({opinion:g,rating:k,salonId:o})},disabled:""===g||null===k,children:i("salon:reviews.addReviewForm.button")})]})]})})]})},Ya=function(e){var t=e.portfolio,n=void 0===t?[]:t,a=Object(v.a)("salon"),r=Object(s.a)(a,1)[0];return Object(x.jsx)(x.Fragment,{children:0===n.length?Object(x.jsx)(Va,{text:r("salon:portfolio.noImages"),icon:Object(x.jsx)(Ra.a,{})}):Object(x.jsx)(U.a,{height:"100%",children:Object(x.jsx)(H.a,{container:!0,spacing:1,children:n.map((function(e){return Object(x.jsx)(H.a,{item:!0,xs:12,md:4,sx:{height:250},children:Object(x.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover"},src:e,alt:"",loading:"lazy"})},e)}))})})})},Xa=n(554),er=n(507),tr=n(187),nr=n(140),ar=Object(h.a)(it.a)((function(){return Object(Y.a)({},ne.breakpoints.up("md"),{width:"140px"})})),rr=Object(h.a)("input")((function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,opacity:0,cursor:"pointer"}})),ir=Object(h.a)(Nn.a,{shouldForwardProp:function(e){return"isActive"!==e}})((function(e){var t=e.isActive;return{width:"140px",padding:ne.spacing(1.5),position:"relative",background:t?ne.palette.primary.main:"translate",color:t?ne.palette.getContrastText(ne.palette.text.primary):ne.palette.text.primary}})),cr=function(){var e=Object(R.i)(),t=e.salonId,n=e.serviceId,a=fn(),i=Object(s.a)(a,2),c=i[0],o=i[1],b=o.data,p=(o.error,xn({salonId:t,serviceId:n})),O=p.data,h=p.isFetching,m=vn(),f=Object(s.a)(m,2),g=f[0],y=f[1],w=y.isSuccess,S=y.isError,k=Object(v.a)("salon"),I=Object(s.a)(k,2),C=I[0],T=I[1],z=Object(r.useState)(new Date),F=Object(s.a)(z,2),D=F[0],A=F[1],q=Object(r.useState)(null),B=Object(s.a)(q,2),E=B[0],W=B[1],P=Object(r.useState)(null),_=Object(s.a)(P,2),L=_[0],N=_[1],V=Object(r.useState)(null),Q=Object(s.a)(V,2),G=Q[0],Z=Q[1],$=Object(M.b)().enqueueSnackbar,J=T.language;if(Object(r.useEffect)((function(){S&&$(C("salon:reservation.errorMsg"),{variant:"error"}),w&&$(C("salon:reservation.successMsg"),{variant:"success"})}),[S,w]),h||void 0===O)return Object(x.jsx)(ma.a,{open:!0,children:Object(x.jsx)(va,{children:Object(x.jsx)(U.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(u.a,{})})})});var Y=[];if(b&&b.freeHours.length>0){var X=Array.from(new Set(b.freeHours.map((function(e){return e.startHours})).flat()));Y=X.sort((function(e,t){return new Date(e).getTime()-new Date(t).getTime()}))}var ee=O.service,te=ee.name,ne=ee.duration,ae=ee.price;return Object(x.jsxs)(d.a,{spacing:1.5,height:"100%",children:[Object(x.jsxs)(d.a,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:"center",children:[Object(x.jsx)(l.a,{variant:"h5",noWrap:!0,children:te}),Object(x.jsx)(l.a,{variant:"h6",width:"fit-content",sx:{whiteSpace:"nowrap"},children:"".concat(Wa(ne)," \u2022 ").concat(ae,"$")})]}),Object(x.jsxs)(d.a,{spacing:2.5,children:[Object(x.jsx)(l.a,{variant:"h6",children:C("reservation.yourFreeTimeHeading")}),Object(x.jsxs)(d.a,{spacing:2.5,direction:{xs:"column",md:"row"},children:[Object(x.jsx)(Xa.a,{disablePast:!0,label:C("reservation.labels.date"),value:D,onChange:function(e){return A(e)},renderInput:function(e){return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(er.a,{label:C("reservation.labels.start"),value:E,onChange:function(e){return W(e)},renderInput:function(e){return Object(x.jsx)(ar,Object(le.a)(Object(le.a)({},e),{},{size:"small"}))},minutesStep:15}),Object(x.jsx)(er.a,{label:C("reservation.labels.end"),disabled:null===E,value:L,onChange:function(e){return N(e)},renderInput:function(e){return Object(x.jsx)(ar,Object(le.a)(Object(le.a)({},e),{},{size:"small"}))},minutesStep:15}),Object(x.jsx)(j.a,{variant:"contained",size:"small","aria-label":C("reservation.searchButton.aria"),disabled:null===E||null===L,onClick:function(){return function(){if(E&&L){var e=Object(tr.a)(D,E)+1;c({salonId:t,serviceId:n,timeRange:{start:Object(nr.a)(E,e).toString(),end:Object(nr.a)(L,e).toString()}})}}()},children:Object(x.jsx)(K.a,{})})]})]}),Object(x.jsxs)(d.a,{spacing:2.5,sx:{flexGrow:1},children:[Object(x.jsx)(l.a,{variant:"h6",children:C("reservation.ourFreeTimeHeading")}),Object(x.jsx)(d.a,{height:"100%",spacing:1.5,children:Y.length>0?Object(x.jsxs)(d.a,{spacing:.05,children:[Object(x.jsx)(l.a,{children:"\n                ".concat(Object(Ja.a)(new Date(Y[0]),"d LLLL yyyy",{locale:_t[J]})," \u2022 \n                ").concat(Object(Ja.a)(new Date(Y[0]),"eeee",{locale:_t[J]}),"\n              ")}),Object(x.jsx)(H.a,{container:!0,spacing:1.5,children:Y.map((function(e){return Object(x.jsx)(H.a,{item:!0,children:Object(x.jsxs)(ir,{isActive:e===G,children:[Object(x.jsx)(rr,{type:"radio",value:e,checked:G===e,onChange:function(){return Z(e)}}),Object(x.jsx)(l.a,{textAlign:"center",children:Object(Ja.a)(new Date(e),"HH:mm")})]})},e)}))})]},Y[0]):Object(x.jsx)(l.a,{children:C("reservation.noDates")})})]}),Object(x.jsx)(U.a,{padding:2,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(j.a,{disabled:null===G,variant:"contained",onClick:function(){if(G&&b){var e=function(e,t){var n=t.freeHours.find((function(t){return t.startHours.includes(e)}));return void 0!==n?n.workerId:null}(G,b);null!==e&&g({salonId:t,workerId:e,serviceId:n,startHour:G})}},children:C("reservation.bookButton.label")})})]})},or=function(){var e=Object(R.g)(),t=Object(R.i)().salonId,n=Object(v.a)("salon"),a=Object(s.a)(n,1)[0],r=hn({salonId:t}),i=r.data,c=r.isFetching,o=r.isError,b=Object(N.a)(ne.breakpoints.down("md")),O=Object(R.j)(["/:salonId/portfolio","/:salonId/reviews","/:salonId/reservation","/:salonId"]),h=null===O||void 0===O?void 0:O.path;return o?Object(x.jsx)(ma.a,{open:!0,children:Object(x.jsx)(va,{children:Object(x.jsx)(U.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsxs)(d.a,{maxWidth:"40%",children:[Object(x.jsx)(l.a,{variant:"h4",textAlign:"center",marginBottom:2,children:a("salon:error.unknown")}),Object(x.jsx)(j.a,{variant:"text",component:p.b,to:"/",sx:{alignSelf:"center"},children:a("salon:goBackButton.aria")})]})})})}):c||void 0===i?Object(x.jsx)(ma.a,{open:!0,children:Object(x.jsx)(va,{children:Object(x.jsx)(U.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(u.a,{})})})}):Object(x.jsx)(ma.a,{open:!0,BackdropProps:{onClick:function(){return e.push("/")}},children:Object(x.jsxs)(va,{children:[Object(x.jsxs)(d.a,{direction:"row",spacing:b?1.5:3,sx:{maxWidth:"100%"},padding:b?"10px 15px 0":"25px 25px 0",children:[Object(x.jsx)(ga,{component:p.b,to:"/:salonId/reservation"!==h?"/":"/".concat(t),"aria-label":a("salon:goBackButton.aria"),children:Object(x.jsx)(fa.a,{})}),Object(x.jsxs)(d.a,{spacing:-.5,overflow:"hidden",alignSelf:"center",children:[Object(x.jsx)(ya,{variant:"h4",noWrap:!0,children:i.name}),Object(x.jsx)(wa,{variant:"caption",noWrap:!0,children:"".concat(i.address," ").concat(i.city.charAt(0).toUpperCase()).concat(i.city.slice(1))})]})]}),"/:salonId/reservation"!==h&&Object(x.jsx)(Sa,{currentTab:h}),Object(x.jsxs)(U.a,{padding:b?"10px":"25px",flexGrow:1,overflow:"auto",position:"relative",children:["/:salonId"===h&&Object(x.jsx)(Ma,{description:i.description,phone:i.phone,imageUrl:i.imageUrl,openingHours:i.openingHours,services:i.services,crew:i.crew}),"/:salonId/reviews"===h&&Object(x.jsx)(Ka,{reviews:i.reviews}),"/:salonId/portfolio"===h&&Object(x.jsx)(Ya,{portfolio:i.portfolio}),"/:salonId/reservation"===h&&Object(x.jsx)(cr,{})]})]})})},sr=n(501),lr=n(491),dr=n(492),jr=n(493),ur=n(494),br=n(495),pr=n(115),Or=Object(h.a)(Un.a)((function(){return{justifyContent:"flex-end"}})),hr=Object(h.a)(Hn.a)((function(e){var t,n=e.theme;return t={},Object(Y.a)(t,n.breakpoints.down("md"),{".MuiDrawer-paper":{width:"100%"}}),Object(Y.a)(t,".MuiDrawer-paper",{border:0}),t})),mr=Object(h.a)(Xn.a)((function(e){var t=e.theme;return{"& > a":Object(Y.a)({color:t.palette.text.primary},t.breakpoints.up("md"),{width:"100%",padding:"8px 40px"}),"& > .selected":{color:t.palette.primary.main,"& svg":{fill:t.palette.primary.main}}}})),xr=function(e){var t=e.isMenuOpen,n=e.handleClose,a=Object(R.h)(),i=Object(pr.a)(),c=Object(N.a)(i.breakpoints.down("md")),o=Object(v.a)("profile"),l=Object(s.a)(o,1)[0];Object(r.useEffect)((function(){return n()}),[a]);var d=[{link:"/profile/edit",text:l("navigation.account"),icon:Object(x.jsx)(lr.a,{})},{link:"/profile/password",text:l("navigation.password"),icon:Object(x.jsx)(dr.a,{})},{link:"/profile/delete",text:l("navigation.deleteAccount"),icon:Object(x.jsx)(jr.a,{})},{link:"/profile/favorites",text:l("navigation.favorites"),icon:Object(x.jsx)(ur.a,{})}];return Object(x.jsxs)(hr,{open:t,variant:c?"temporary":"permanent",children:[Object(x.jsx)(Or,{children:c?Object(x.jsx)(V.a,{onClick:n,children:Object(x.jsx)(ia.a,{})}):null}),Object(x.jsx)(mr,{children:d.map((function(e){var t=e.icon,n=e.link,a=e.text;return Object(x.jsxs)(ea.a,{button:!0,component:p.c,activeClassName:"selected",to:n,children:[Object(x.jsx)(br.a,{children:t}),Object(x.jsx)($.a,{primary:a})]},n)}))})]})},fr=n(555),vr=Object(h.a)(fr.a)((function(){return Object(Y.a)({zIndex:1},ne.breakpoints.up("md"),{zIndex:ne.zIndex.drawer+1})})),gr=Object(h.a)(Un.a)((function(){return{justifyContent:"space-between"}})),yr=Object(h.a)(j.a)((function(){return{color:"#fff",textDecoration:"none"}})),wr=Object(h.a)(V.a)((function(){return{paddingLeft:0,paddingRight:ne.spacing(2.5)}})),Sr=Object(h.a)(V.a)((function(){return{padding:0}})),kr=Object(h.a)(l.a)((function(){return{marginRight:ne.spacing(1),height:"fit-content",color:ne.palette.grey[500]}})),Ir=Object(h.a)(G.a)((function(){return{paddingRight:ne.spacing(3)}})),Cr=Object(h.a)(p.b)(Da||(Da=Object(_e.a)(["\n  text-decoration: none;\n  color: ",";\n"])),ne.palette.text.primary),Tr=function(e){var t=e.isMenuOpen,n=e.handleClose,a=Object(R.h)(),i=tn().data,c=void 0===i?{salons:[],message:""}:i;return Object(r.useEffect)((function(){return n()}),[a]),Object(x.jsxs)(Qn,{open:t,variant:"temporary",children:[Object(x.jsx)(Vn,{children:Object(x.jsx)(V.a,{onClick:n,children:Object(x.jsx)(ia.a,{})})}),Object(x.jsx)(b.a,{padding:2,children:Object(x.jsx)(Zn,{data:c})})]})},zr=n(355),Fr=n(496),Dr=n(497),Ar=n(498),qr=n(499),Br=n(500),Er=function(e){var t=e.open,n=e.anchorEl,a=e.onClose,r=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role})),i=Object(R.g)(),c=Object(v.a)("header"),o=Object(s.a)(c,1)[0];return Object(x.jsxs)(zr.a,{anchorEl:n,open:t,onClose:a,onClick:a,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(x.jsxs)(Ir,{component:p.b,to:"/profile/edit",children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Fr.a,{})}),o("navigation.profile")]}),"STANDARD"===r&&Object(x.jsxs)(Ir,{component:p.b,to:"/profile/favorites",children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Dr.a,{})}),o("navigation.favorites")]}),"STANDARD"===r&&Object(x.jsxs)(Ir,{children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Ar.a,{})}),o("navigation.schedule")]}),"BUSINESS"===r&&Object(x.jsxs)(Ir,{component:p.b,to:"/salons",children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(qr.a,{})}),o("navigation.business")]}),Object(x.jsxs)(Ir,{onClick:function(){return D(i.push)},children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Br.a,{})}),o("navigation.signOut")]})]})},Wr=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),c=Object(s.a)(i,2),o=c[0],d=c[1],j=Object(v.a)("header"),u=Object(s.a)(j,1)[0],O=Object(R.h)().pathname,h=Object(Te.e)((function(e){return e.user})),m=Boolean(n),f=Object(N.a)((function(e){return e.breakpoints.up("md")}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(vr,{color:"transparent",elevation:0,position:"relative",children:Object(x.jsxs)(gr,{children:[Object(x.jsxs)(b.a,{display:"flex",children:[(O.startsWith("/profile")||O.startsWith("/salons"))&&!f&&Object(x.jsx)(wr,{onClick:function(){return d(!0)},children:Object(x.jsx)(sr.a,{})}),Object(x.jsx)(Cr,{to:"/",children:Object(x.jsx)(l.a,{variant:"h4",component:"h1",children:u("title")})})]}),Object(x.jsx)(b.a,{display:"flex",alignItems:"center",children:z()?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(kr,{variant:"body2",children:null===h||void 0===h?void 0:h.fullname}),Object(x.jsx)(Sr,{onClick:function(e){return a(e.currentTarget)},children:Object(x.jsx)(kt.a,{alt:null===h||void 0===h?void 0:h.fullname,src:null===h||void 0===h?void 0:h.avatarUrl})})]}):Object(x.jsx)(yr,{variant:"contained",color:"primary",disableElevation:!0,component:p.b,to:"/login",children:u("button.signin")})})]})}),Object(x.jsx)(Er,{open:m,onClose:function(){return a(null)},anchorEl:n}),z()&&O.startsWith("/profile")&&Object(x.jsx)(xr,{handleClose:function(){return d(!1)},isMenuOpen:o}),z()&&O.startsWith("/salons")&&Object(x.jsx)(Tr,{handleClose:function(){return d(!1)},isMenuOpen:o})]})};!function(e){e.Normal="NORMAL",e.Business="BUSINESS",e.Unauthorized="UNAUTHORIZED"}(Aa||(Aa={}));var Pr=function(e){var t=e.children,n=e.path,a=e.render,r=e.userType,i=void 0===r?Aa.Normal:r,c=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role}));return i===Aa.Business&&c===ce.Standard||i!==Aa.Unauthorized&&!z()||i===Aa.Unauthorized&&z()?Object(x.jsx)(R.a,{to:"/"}):a?Object(x.jsx)(R.b,{path:n,render:a,children:t}):Object(x.jsx)(R.b,{path:n,children:t})},Mr=n(502),Rr=n(556),_r=n(558),Lr=n(559),Ur=n(503),Hr=function(){var e=["Details","Opening hours","Crew","Services"],t=Object(r.useState)(0),n=Object(s.a)(t,2),a=n[0],i=n[1],c=Object(ut.b)({mode:"onBlur"}),o=c.register,u=c.handleSubmit,b=c.watch,p=c.getValues,O=c.setValue,h=c.reset,m=c.formState.errors,f=b("crew"),g=b("services"),y=Object(v.a)("admin"),w=Object(s.a)(y,1)[0],k=Object(r.useState)(void 0),I=Object(s.a)(k,2),C=I[0],T=I[1],z=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],F=ln(),D=Object(s.a)(F,2),A=D[0],q=D[1],B=q.isSuccess,E=q.isError,W=Object(Te.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.id})),P=ke().data,_=Se().data,N=Object(M.b)().enqueueSnackbar,Q=Object(R.g)();Object(r.useEffect)((function(){B&&(N(w("Salon created"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),Q.push("/salons")),E&&(N(w("Salon creation failed"),{variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),Q.push("/salons"))}),[B,E]);var Z=function(){var e=Object(ht.a)(Ot.a.mark((function e(t){var n,a,r,i,c,o,s,l,d,j,u,b;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!t.image){e.next=14;break}return(a=new FormData).append("image",t.image),e.prev=4,e.next=7,gt()({method:"post",url:"".concat(S,"/image-upload"),data:a,headers:{"Content-Type":"multipart/form-data"}});case 7:r=e.sent,n=r.data.links[0],e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:i=Object.keys(t.openingHours),c=i.map((function(e){return Object(le.a)({name:e.toLowerCase()},t.openingHours[e])})),o=t.name,s=t.address,l=t.city,d=t.services,j=t.crew,u=t.description,b=t.type,A({owner:W,name:o,address:s,city:l,services:d,crew:j,description:u,type:[b],imageUrl:n,openingHours:c,contact:{email:t.contactEmail,phone:t.phone}});case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(t){"next"===t&&(a===e.length-1&&u(Z)(),a+1<e.length&&i((function(e){return e+1}))),"back"===t&&a-1>=0&&i((function(e){return e-1}))},K=function(){var e=p("crew"),t={name:p("crewInput"),imageId:""};Array.isArray(e)?(e.push(t),O("crew",e)):O("crew",[t]),O("crewInput","")},Y=function(){var e=p("services"),t=p("service");Array.isArray(e)?(e.push(t),O("services",e)):O("services",[t]),h(Object(le.a)(Object(le.a)({},p()),{},{service:{}}))};return Object(x.jsxs)(L.a,{maxWidth:!1,children:[Object(x.jsx)(U.a,{sx:{marginBottom:2},children:Object(x.jsx)(l.a,{component:"h1",variant:"h5",children:"Create salon"})}),Object(x.jsxs)(d.a,{spacing:2,alignItems:"center",children:[Object(x.jsx)(L.a,{maxWidth:"lg",disableGutters:!0,children:Object(x.jsx)(Rr.a,{activeStep:a,children:e.map((function(e,t){return Object(x.jsx)(_r.a,{children:Object(x.jsx)(Lr.a,{children:e})},t)}))})}),Object(x.jsxs)(L.a,{maxWidth:"lg",disableGutters:!0,children:[Object(x.jsx)(l.a,{variant:"h6",component:"h2",children:["Let's provide some informations","Time of your work","Introduce your crew","What services will be provided?"][a]}),Object(x.jsx)(H.a,{container:!0,sx:{marginY:2},justifyContent:"center",children:Object(x.jsx)(H.a,{item:!0,xs:!0,lg:6,children:Object(x.jsx)("form",{children:Object(x.jsx)(d.a,{spacing:2,children:function(){var e,t,n,r,i,c,s,u,b,h,v;switch(a){case 0:return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:"Salon name",type:"text"},o("name",{required:{value:!0,message:"Field is required"},minLength:{value:3,message:"Minimum field length is 3"}})),{},{error:!!m.name,helperText:null===(e=m.name)||void 0===e?void 0:e.message})),Object(x.jsx)("input",{type:"file",id:"avatar-image-upload",accept:"image/png, image/jpeg",onChange:function(e){return function(e){var t,n,a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],r=URL.createObjectURL(a);O("image",a),T(r)}(e)},hidden:!0}),Object(x.jsx)("label",{htmlFor:"avatar-image-upload",children:Object(x.jsx)(Nn.a,{elevation:0,variant:"outlined",sx:{height:"300px",cursor:"pointer"},children:C?Object(x.jsx)("img",{src:C,width:"100%",height:"100%"}):Object(x.jsxs)(d.a,{height:"100%",justifyContent:"center",alignItems:"center",children:[Object(x.jsx)(Mr.a,{}),Object(x.jsx)(l.a,{children:"Add photo"})]})})}),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:"Address",type:"text"},o("address",{required:{value:!0,message:"Field is required"}})),{},{error:!!m.address,helperText:null===(t=m.address)||void 0===t?void 0:t.message})),Object(x.jsx)(it.a,{variant:"outlined",size:"small",label:"City",select:!0,onChange:function(e){return O("city",e.target.value)},error:!!m.city,helperText:null===(n=m.city)||void 0===n?void 0:n.message,defaultValue:"",children:P&&(null===P||void 0===P?void 0:P.cities.map((function(e){return Object(x.jsx)(G.a,{value:e._id,children:e.name},e._id)})))}),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:"Postal code",type:"text"},o("postalCode",{required:{value:!0,message:"Field is required"},pattern:{value:/\d{2}[-]{0,1}\d{3}$/,message:"Wrong postal code"}})),{},{error:!!m.postalCode,helperText:null===(r=m.postalCode)||void 0===r?void 0:r.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:"Phone",type:"text"},o("phone",{required:{value:!0,message:"Field is required"}})),{},{error:!!m.phone,helperText:null===(i=m.phone)||void 0===i?void 0:i.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:"Contact email",type:"text"},o("contactEmail",{required:{value:!0,message:"Field is required"}})),{},{error:!!m.contactEmail,helperText:null===(c=m.contactEmail)||void 0===c?void 0:c.message})),Object(x.jsx)(it.a,{variant:"outlined",size:"small",label:"Type",select:!0,onChange:function(e){return O("type",e.target.value)},error:!!m.type,helperText:null===(s=m.type)||void 0===s?void 0:s.message,defaultValue:"",children:_&&(null===_||void 0===_?void 0:_.categories.map((function(e){return Object(x.jsx)(G.a,{value:e._id,children:e.name},e._id)})))})]});case 1:return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.a,{direction:"column",spacing:1,children:z.map((function(e,t){return Object(x.jsxs)(H.a,{container:!0,children:[Object(x.jsx)(H.a,{item:!0,container:!0,xs:3,alignItems:"center",children:Object(x.jsx)(l.a,{variant:"body1",children:e})}),Object(x.jsxs)(H.a,{item:!0,container:!0,xs:!0,alignItems:"center",children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",label:"From",size:"small"},o("openingHours.".concat(e,".open"))),{},{margin:"dense",sx:{marginRight:1}})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",label:"To",size:"small"},o("openingHours.".concat(e,".close"))),{},{margin:"dense"}))]})]},t)}))})});case 2:return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",size:"small",label:"Fullname",type:"text",sx:{flexGrow:1}},o("crewInput"))),Object(x.jsx)(j.a,{onClick:K,endIcon:Object(x.jsx)(Rn.a,{}),variant:"outlined",children:"Add"})]}),Object(x.jsx)(l.a,{variant:"body1",component:"p",children:"Crew members:"}),Object(x.jsx)(d.a,{direction:"row",spacing:1,flexWrap:"wrap",children:f&&f.map((function(e,t){return Object(x.jsx)(oe.a,{label:e.name,avatar:Object(x.jsx)(kt.a,{children:e.name[0]}),onDelete:function(){return function(e){var t=p("crew");t.splice(e,1),O("crew",t)}(t)},color:"secondary",sx:{marginBottom:1}},t)}))})]});case 3:return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:w("admin:serviceDialog.name")},o("service.name")),{},{error:!!m.name,helperText:null===(u=m.name)||void 0===u?void 0:u.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:w("admin:serviceDialog.price"),type:"number"},o("service.price")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"\u20ac"}),inputProps:{min:0}},error:!!m.price,helperText:null===(b=m.price)||void 0===b?void 0:b.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:w("admin:serviceDialog.duration"),type:"number",multiline:!0,maxRows:4},o("service.duration")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"min"}),inputProps:{min:0,step:1}},error:!!m.duration,helperText:null===(h=m.duration)||void 0===h?void 0:h.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:w("admin:serviceDialog.description")},o("service.description")),{},{error:!!m.description,helperText:null===(v=m.description)||void 0===v?void 0:v.message})),Object(x.jsx)(j.a,{onClick:Y,endIcon:Object(x.jsx)(Rn.a,{}),variant:"outlined",children:"Add"})]}),Object(x.jsx)(l.a,{variant:"body1",component:"p",children:"Services:"}),Object(x.jsx)(Xn.a,{children:g&&g.map((function(e,t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ea.a,{secondaryAction:Object(x.jsx)(V.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){var t=p("services");t.splice(e,1),O("services",t)}(t)},children:Object(x.jsx)(jr.a,{})}),children:Object(x.jsx)($.a,{primary:e.name,secondary:Object(x.jsxs)(Xn.a,{sx:{width:"100%"},children:[Object(x.jsx)(ea.a,{children:Object(x.jsxs)(l.a,{variant:"body2",component:"p",children:["Price: ",e.price," \u20ac"]})}),Object(x.jsx)(ea.a,{children:Object(x.jsxs)(l.a,{variant:"body2",component:"p",children:["Duration: ",e.duration," min"]})}),Object(x.jsx)(ea.a,{children:Object(x.jsxs)(l.a,{variant:"body2",component:"p",children:["Description: ",e.description]})})]})})},t),t<g.length-1&&Object(x.jsx)(Ur.a,{})]})}))})]})}}()})})})}),Object(x.jsxs)(d.a,{spacing:1,direction:"row",justifyContent:"flex-end",paddingBottom:2,children:[Object(x.jsx)(j.a,{variant:"outlined",onClick:function(){return J("back")},disabled:0===a,disableElevation:!0,children:"Back"}),Object(x.jsx)(j.a,{variant:"contained",onClick:function(){return J("next")},disableElevation:!0,type:"button",children:a===e.length-1?"Save":"Next"})]})]})]})]})},Nr=function(){return Object(x.jsx)(p.a,{basename:"/voirsy-front-end",children:Object(x.jsx)(r.Suspense,{fallback:"loading",children:Object(x.jsx)(Lt,{children:Object(x.jsxs)(R.d,{children:[Object(x.jsx)(Pr,{userType:Aa.Unauthorized,path:"/login",children:Object(x.jsx)(An,{})}),Object(x.jsx)(Pr,{path:"/profile",render:function(e){var t=e.match.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Wr,{}),Object(x.jsxs)(R.d,{children:[Object(x.jsx)(R.b,{path:"".concat(t,"/edit"),children:Object(x.jsx)(Dt,{})}),Object(x.jsx)(R.b,{path:"".concat(t,"/password"),children:Object(x.jsx)(bt,{})}),Object(x.jsx)(R.b,{path:"".concat(t,"/delete"),children:Object(x.jsx)(_,{})}),Object(x.jsx)(R.b,{path:"".concat(t,"/favorites"),children:Object(x.jsx)(ha,{})}),Object(x.jsx)(R.b,{path:"*",children:Object(x.jsx)(R.a,{to:"".concat(t,"/edit")})})]})]})}}),Object(x.jsx)(Pr,{userType:Aa.Business,path:"/salons",render:function(e){var t=e.match.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Wr,{}),Object(x.jsxs)(R.d,{children:[Object(x.jsx)(R.b,{path:"".concat(t,"/:salonId/calendar"),children:Object(x.jsx)($n,{children:Object(x.jsx)(Oa,{})})}),Object(x.jsx)(R.b,{path:"".concat(t,"/:salonId/portfolio"),children:Object(x.jsx)($n,{children:Object(x.jsx)(pa,{})})}),Object(x.jsx)(R.b,{path:"".concat(t,"/create-salon"),children:Object(x.jsx)(Hr,{})}),Object(x.jsx)(R.b,{path:["".concat(t,"/:salonId/details")],children:Object(x.jsx)($n,{children:Object(x.jsx)(ba,{})})}),Object(x.jsx)(R.b,{path:"*",children:Object(x.jsx)($n,{})})]})]})}}),Object(x.jsx)(R.b,{path:"/",render:function(e){var t=e.match.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Wr,{}),Object(x.jsx)(nt,{}),Object(x.jsxs)(R.d,{children:[Object(x.jsx)(R.b,{path:"".concat(t,":salonId/reviews"),children:Object(x.jsx)(or,{})}),Object(x.jsx)(R.b,{path:"".concat(t,":salonId/portfolio"),children:Object(x.jsx)(or,{})}),Object(x.jsx)(Pr,{path:"".concat(t,":salonId/reservation/:serviceId"),children:Object(x.jsx)(or,{})}),Object(x.jsx)(R.b,{path:["".concat(t,":salonId"),"".concat(t,":salonId/information")],children:Object(x.jsx)(or,{})})]})]})}})]})})})})},Vr=(n(409),n(236)),Qr=n(94),Gr=n(351),Zr=n(352);Vr.a.use(Gr.a).use(Zr.a).use(Qr.e).init({backend:{loadPath:"".concat("/voirsy-front-end","/locales/{{lng}}/{{ns}}.json"),allowMultiLoading:!0},fallbackLng:"en-us",lowerCaseLng:!0,load:"currentOnly"});Vr.a;o.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(Te.a,{store:wn,children:Object(x.jsx)(Nr,{})})}),document.getElementById("root"))}},[[410,1,2]]]);
//# sourceMappingURL=main.3cc9e013.chunk.js.map