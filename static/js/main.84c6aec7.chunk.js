(this["webpackJsonpvoirsy-front-end"]=this["webpackJsonpvoirsy-front-end"]||[]).push([[0],{409:function(e,t,n){},410:function(e,t,n){"use strict";n.r(t);var a,r=n(1),i=n.n(r),c=n(61),o=n.n(c),s=n(6),l=n(150),d=n(454),j=n(524),u=n(525),b=n(453),p=n(22),O=n(357),m=n(451),h=Object(m.a)(j.a)((function(e){var t=e.theme;return{color:t.palette.text.primary,borderColor:Object(O.a)(t.palette.common.black,.23),"&:hover":{borderColor:Object(O.a)(t.palette.common.black,.23)}}})),x=n(0),f=function(e){var t=e.children;return Object(x.jsx)(h,{variant:"outlined",fullWidth:!0,size:"large",component:p.b,to:"/",children:t})},v=n(452),g=n(523),y=n(97),w=n(56),S="https://voirsy-backend.herokuapp.com",k="/profile/favorites",I="/profile",T="/profile",C="/profile",z=function(){return!!localStorage.getItem("JWT_TOKEN")},D=function(){return localStorage.getItem("JWT_TOKEN")||""},F=function(e){localStorage.removeItem("JWT_TOKEN"),e("/")},A=function(e){var t="Bearer ".concat(D());return t&&e.set("Authorization",t),e},q=Object(y.a)({reducerPath:"profileApi",baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),endpoints:function(e){return{fetchAllUsersFavorites:e.query({query:function(){return"".concat(k)},transformResponse:function(e){return e.favorites}}),changePassword:e.mutation({query:function(e){return{url:"".concat(I),method:"POST",body:e}}}),deleteAccount:e.mutation({query:function(){return{url:"".concat(T),method:"DELETE"}}}),changeUserData:e.mutation({query:function(e){return{url:"".concat(C),method:"PATCH",body:e}},transformResponse:function(e){return e.user}})}}}),B=q.useFetchAllUsersFavoritesQuery,E=q.useChangePasswordMutation,W=q.useDeleteAccountMutation,L=q.useChangeUserDataMutation,P=n(35),M=n(32),R=function(){var e=W(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=a.isSuccess,c=a.isError,o=a.isLoading,p=Object(P.b)().enqueueSnackbar,O=Object(v.a)("profile"),m=Object(s.a)(O,1)[0],h=Object(M.g)();return Object(r.useEffect)((function(){i&&(p(m("delete.successMsg"),{variant:"success"}),F(h.push)),c&&p(m("delete.errorMsg"),{variant:"error"})}),[i,c]),Object(x.jsxs)(b.a,{component:"main",maxWidth:400,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:m("delete.heading")}),Object(x.jsx)(l.a,{marginBottom:10,textAlign:"center",fontSize:"1.25rem",children:Object(x.jsx)(g.a,{defaults:m("delete.content"),components:[Object(x.jsx)("strong",{},"delete")]})}),Object(x.jsxs)(d.a,{direction:"row",spacing:2.5,children:[Object(x.jsx)(f,{children:m("delete.action.cancel")}),Object(x.jsx)(j.a,{disabled:o,variant:"contained",fullWidth:!0,size:"large",color:"error",onClick:function(){return n()},children:o?Object(x.jsx)(u.a,{size:25}):m("delete.action.delete")})]})]})},_=n(532),U=n(463),H=n(518),V=n(461),N=n(533),Q=n(50),G=n(534),Z=n(509),$=n(464),J=n(511),K=n(462),Y=n(3),X=n(5),ee=n(237),te=n(17),ne=Object(ee.a)({palette:{primary:{light:"#66e0ff",main:"#19aed4",dark:"#007ea3",contrastText:te.a.grey[50]},secondary:{light:"#fa70ab",main:"#c43d7c",dark:"#8f0050",contrastText:"#fff"},text:{primary:te.a.grey[900],secondary:te.a.grey[600]}}}),ae=Object(X.a)("div")((function(){return Object(Y.a)({boxSizing:"border-box",height:"40px",border:"1px solid ".concat(ne.palette.grey[400]),borderRadius:ne.shape.borderRadius,display:"flex",alignItems:"center",width:"100%",div:{flexGrow:1},button:{margin:"0 ".concat(ne.spacing(1))},":focus-within":{border:"1px solid ".concat(ne.palette.primary.main)}},ne.breakpoints.up("sm"),{maxWidth:"400px"})}));!function(e){e.MostPopular="Most popular",e.TopRated="Top rated",e.QuantityOfRating="Quantity of ratings"}(a||(a={}));var re,ie,ce,oe=n(516),se=function(e){var t=e.label,n=e.onDelete;return Object(x.jsx)(oe.a,{label:t,onDelete:n,color:"secondary",sx:{textTransform:"capitalize"}})},le=n(14),de=n(186),je=n(508),ue=n(526),be=Object(X.a)(l.a,{shouldForwardProp:function(e){return"isOpen"!==e}})((function(e){var t=e.isOpen;return Object(Y.a)({position:"absolute",inset:0,display:"flex",alignItems:"center",paddingLeft:ne.spacing(1),color:t?ne.palette.background.paper:ne.palette.text.primary,textTransform:"uppercase"},ne.breakpoints.up("sm"),{paddingLeft:ne.spacing(2)})})),pe=Object(X.a)(ue.a,{shouldForwardProp:function(e){return"isOpen"!==e}})((function(e){var t=e.isOpen;return Object(Y.a)({flexGrow:1,minWidth:"130px",borderRadius:ne.shape.borderRadius,background:t?ne.palette.primary.main:ne.palette.background.paper,"svg *":{fill:t?ne.palette.background.paper:ne.palette.text.primary}},ne.breakpoints.up("sm"),{maxWidth:"180px"})})),Oe=["label","children","MenuProps"],me=function(e){var t=e.label,n=e.children,a=e.MenuProps,i=Object(de.a)(e,Oe),c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=o[0],d=o[1];return Object(x.jsxs)(pe,{isOpen:l,children:[Object(x.jsx)(be,{isOpen:l,variant:"body2",id:"location-helper-label",children:t}),Object(x.jsx)(je.a,Object(le.a)(Object(le.a)({onOpen:function(){return d(!0)},onClose:function(){return d(!1)},labelId:"location-helper-label",id:"location-helper",color:"primary",renderValue:function(){return""},size:"small",MenuProps:Object(le.a)({transformOrigin:{vertical:"top",horizontal:"left"},anchorOrigin:{vertical:"bottom",horizontal:"left"}},a)},i),{},{children:n}))]})},he="/salons/",xe="/category",fe="/cities",ve="/profile/favorites",ge="/profile/favorites",ye=Object(y.a)({reducerPath:"salonsApi",baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),endpoints:function(e){return{fetchAllSalons:e.query({query:function(e){var t=e.location,n=void 0===t?"":t,a=e.search,r=void 0===a?"":a,i=e.sortBy,c=void 0===i?"":i,o=e.salonType,s=void 0===o?"":o,l={search:r};return n&&(l.location=n),c&&(l.sortBy=c),s.length>0&&(l.salonType=s),{url:"".concat(he),method:"post",body:l}}}),fetchAllCities:e.query({query:function(){return"".concat(fe)}}),fetchAllCategories:e.query({query:function(){return"".concat(xe)}}),addToFavorites:e.mutation({query:function(e){return{url:"".concat(ve),method:"POST",body:e}}}),removeFromFavorites:e.mutation({query:function(e){return{url:"".concat(ge),method:"DELETE",body:e}}})}}}),we=ye.useLazyFetchAllSalonsQuery,Se=ye.useFetchAllCategoriesQuery,ke=ye.useFetchAllCitiesQuery,Ie=ye.useAddToFavoritesMutation,Te=ye.useRemoveFromFavoritesMutation,Ce=n(24),ze=n(20),De=Object(ze.d)({name:"salonsFilters",initialState:{sortBy:"",search:"",location:"",salonType:[]},reducers:{setFilters:function(e,t){var n=t.payload;void 0!==n.search&&(e.search=n.search),void 0!==n.sortBy&&(e.sortBy=n.sortBy),void 0!==n.location&&(e.location=n.location),void 0!==n.salonType&&(e.salonType=n.salonType)}}}),Fe=De.actions.setFilters,Ae=De.reducer,qe=function(){var e,t,n=Object(v.a)(["home","common"]),i=Object(s.a)(n,1)[0],c=Object(Ce.e)((function(e){return e.salonsFilters})),o=Object(Ce.d)(),l=Object(V.a)(ne.breakpoints.up("sm")),j=Object(r.useState)(c.search),b=Object(s.a)(j,2),p=b[0],O=b[1],m=Se(),h=m.data,f=m.isFetching,g=ke(),y=g.data,w=g.isFetching,S=function(){return o(Fe({search:p}))};return Object(x.jsxs)(_.a,{component:"nav",maxWidth:!1,children:[Object(x.jsxs)(d.a,{direction:l?"row":"column",spacing:l?2:1,children:[Object(x.jsxs)(ae,{children:[Object(x.jsx)(N.a,{"aria-label":"menu",size:"small",onClick:S,children:Object(x.jsx)(K.a,{})}),Object(x.jsx)(Q.c,{placeholder:"".concat(i("filters.search.label"),"..."),inputProps:{"aria-label":i("filters.search.ariaLabel"),"data-test-id":"Search input"},value:p,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&S()}})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:l?2:1,width:"100%",overflow:l?"visible":"auto",children:[Object(x.jsx)(me,{"data-test-id":"Location select",label:i("filters.location.label"),value:c.location,onChange:function(e){return o(Fe({location:e.target.value}))},MenuProps:{style:{maxHeight:"300px"}},children:w?Object(x.jsx)(U.a,{display:"flex",justifyContent:"center",padding:"10px 0",children:Object(x.jsx)(u.a,{})}):null===y||void 0===y?void 0:y.cities.map((function(e){return Object(x.jsxs)(G.a,{value:e._id,sx:{textTransform:"capitalize",paddingRight:3},children:[Object(x.jsx)(Z.a,{checked:e._id===c.location}),Object(x.jsx)($.a,{primary:e.name})]},e._id)}))}),Object(x.jsx)(me,{label:i("filters.salonType.label"),value:c.salonType,onChange:function(e){return o(Fe({salonType:e.target.value}))},multiple:!0,children:f?Object(x.jsx)(U.a,{display:"flex",justifyContent:"center",padding:"10px 0",children:Object(x.jsx)(u.a,{})}):null===h||void 0===h?void 0:h.categories.map((function(e){return Object(x.jsxs)(G.a,{value:e._id,sx:{textTransform:"capitalize",paddingRight:3},children:[Object(x.jsx)(J.a,{checked:c.salonType.indexOf(e._id)>-1}),Object(x.jsx)($.a,{primary:i("salonType.".concat(e.name.toLowerCase()),{ns:"common"})})]},e._id)}))}),Object(x.jsx)(me,{label:i("sortBy.label"),value:c.sortBy,onChange:function(e){return o(Fe({sortBy:e.target.value}))},children:Object.entries(a).map((function(e){return Object(x.jsxs)(G.a,{value:e[0],sx:{paddingRight:3},children:[Object(x.jsx)(Z.a,{checked:e[0]===c.sortBy}),Object(x.jsx)($.a,{primary:i("sortBy.options.".concat(e[0]))})]},e[0])}))})]})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:l?2:1,width:"100%",overflow:"auto",marginTop:l?2:1,children:[""!==c.location&&Object(x.jsx)(se,{label:"".concat(i("filters.location.label"),": ").concat(null===y||void 0===y||null===(e=y.cities.find((function(e){return e._id===c.location})))||void 0===e?void 0:e.name),onDelete:function(){return o(Fe({location:""}))}}),c.salonType.length>0&&c.salonType.map((function(e){var t;return Object(x.jsx)(se,{label:"".concat(i("filters.salonType.label"),": ").concat(null===h||void 0===h||null===(t=h.categories.find((function(t){return t._id===e})))||void 0===t?void 0:t.name),onDelete:function(){return o(Fe({salonType:c.salonType.filter((function(t){return t!==e}))}))}},e)})),""!==c.sortBy&&Object(x.jsx)(se,{label:"".concat(i("sortBy.label"),": ").concat(null===(t=Object.entries(a).find((function(e){return e[0]===c.sortBy})))||void 0===t?void 0:t[1]),onDelete:function(){return o(Fe({sortBy:""}))}})]})]})},Be=n(537),Ee=n(465),We=n(466),Le=n(467),Pe=n(468),Me=n(469),Re=n(51),_e=n(535),Ue=n(536),He=Object(X.a)(_e.a)(re||(re=Object(Re.a)(["\n  position: relative;\n"]))),Ve=Object(X.a)(Ue.a)(ie||(ie=Object(Re.a)(["\n  position: relative;\n\n  :last-child {\n    padding-bottom: ",";\n  }\n"])),ne.spacing(2)),Ne=Object(X.a)(oe.a)((function(){return{position:"absolute",background:ne.palette.background.paper,top:"10px",left:"10px",".MuiChip-icon":{color:ne.palette.warning.light}}})),Qe=Object(X.a)(N.a)((function(){return{position:"absolute",background:ne.palette.background.paper,top:"-".concat(ne.spacing(3)),right:ne.spacing(2),boxShadow:ne.shadows[6],":hover":{backgroundColor:ne.palette.background.paper},":disabled":{background:ne.palette.background.paper}}})),Ge=Object(X.a)(p.b)((function(){return{textDecoration:"none",color:ne.palette.text.primary,":hover":{color:ne.palette.text.secondary}}}));!function(e){e.Standard="STANDARD",e.Business="BUSINESS"}(ce||(ce={}));var Ze=n(26),$e=Object(ze.d)({name:"user",initialState:null,reducers:{setUserData:function(e,t){return t.payload},removeFromFav:function(e,t){var n=t.payload;(null===e||void 0===e?void 0:e.favorites)&&(e.favorites=e.favorites.filter((function(e){return e!==n})))},addToFav:function(e,t){var n=t.payload;(null===e||void 0===e?void 0:e.favorites)&&(e.favorites=[].concat(Object(Ze.a)(e.favorites),[n]))}}}),Je=$e.actions,Ke=Je.setUserData,Ye=Je.removeFromFav,Xe=Je.addToFav,et=$e.reducer,tt=function(e){var t=e.imageUrl,n=e.name,a=e.city,i=e.address,c=e.rating,o=e.salonType,j=e._id,b=Ie(),p=Object(s.a)(b,2),O=p[0],m=p[1],h=m.isError,f=m.isSuccess,g=m.isLoading,y=Te(),w=Object(s.a)(y,2),S=w[0],k=w[1],I=k.isError,T=k.isSuccess,C=k.isLoading,D=Object(Ce.d)(),F=Object(P.b)().enqueueSnackbar,A=Object(v.a)("common"),q=Object(s.a)(A,1)[0],B=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role})),E=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.favorites}))||[],W=z()&&B!==ce.Business,L=Object(r.useState)(!1),M=Object(s.a)(L,2),R=M[0],_=M[1];Object(r.useEffect)((function(){_(Boolean(E.find((function(e){return e===j}))))}),[]),Object(r.useEffect)((function(){h&&F(q("favoriteMsg.errorAdd",{ns:"home"}),{variant:"error"}),f&&(F(q("favoriteMsg.successAdd",{ns:"home"}),{variant:"success"}),_(!0),D(Xe(j)))}),[h,f]),Object(r.useEffect)((function(){I&&F(q("favoriteMsg.errorRemove",{ns:"home"}),{variant:"error"}),T&&(F(q("favoriteMsg.successRemove",{ns:"home"}),{variant:"success"}),_(!1),D(Ye(j)))}),[I,T]);var U=R?Object(x.jsx)(Ee.a,{}):Object(x.jsx)(We.a,{});return Object(x.jsxs)(He,{children:["0"!==c&&Object(x.jsx)(Ne,{size:"small",label:Math.round(10*parseFloat(c))/10,icon:Object(x.jsx)(Le.a,{})}),Object(x.jsx)(Be.a,{component:"img",height:"160",image:t,alt:n}),Object(x.jsxs)(Ve,{children:[W&&Object(x.jsx)(Qe,{size:"large",disabled:g||C,onClick:function(){return R?S({salonId:j}):O({salonId:j})},children:g||C?Object(x.jsx)(u.a,{size:24}):U}),Object(x.jsx)(l.a,{gutterBottom:!0,variant:"subtitle1",component:"div",noWrap:!0,maxWidth:W?"90%":"100%",children:Object(x.jsx)(Ge,{to:"/".concat(j),children:n})}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,marginBottom:1,alignItems:"center",children:[Object(x.jsx)(Pe.a,{sx:{color:"text.secondary",fontSize:20}}),Object(x.jsx)(l.a,{variant:"body2",color:"text.secondary",noWrap:!0,children:i})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,marginBottom:1.5,alignItems:"center",children:[Object(x.jsx)(Me.a,{sx:{color:"text.secondary",fontSize:20}}),Object(x.jsx)(l.a,{variant:"body2",color:"text.secondary",noWrap:!0,children:a})]}),Object(x.jsx)(d.a,{direction:"row",spacing:1,children:o.map((function(e){return Object(x.jsx)(oe.a,{label:q("salonType.".concat(e.toLowerCase())),size:"small",color:"secondary"},e)}))})]})]})},nt=function(){var e=Object(v.a)("home"),t=Object(s.a)(e,1)[0],n=we(),a=Object(s.a)(n,2),i=a[0],c=a[1],o=c.isError,d=c.data,j=void 0===d?{salons:[],message:""}:d,b=c.isFetching,p=Object(Ce.e)((function(e){return e.salonsFilters}));return Object(r.useEffect)((function(){i({})}),[]),Object(r.useEffect)((function(){i(p)}),[p]),o?Object(x.jsx)(l.a,{children:t("error.unknown")}):Object(x.jsxs)("main",{children:[Object(x.jsx)(qe,{}),Object(x.jsxs)(_.a,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",marginTop:4,paddingBottom:4},children:[b&&Object(x.jsx)(U.a,{children:Object(x.jsx)(u.a,{})}),!b&&j.salons.length>0&&Object(x.jsx)(H.a,{container:!0,spacing:3,"data-test-id":"Grid of salon cards",children:j.salons.map((function(e,t){return Object(x.jsx)(H.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(x.jsx)(tt,{_id:e._id,address:e.address,city:e.city,imageUrl:e.imageUrl,name:e.name,salonType:e.type,rating:e.rating})},t)}))}),!b&&0===j.salons.length&&Object(x.jsx)(l.a,{variant:"h5",children:"There are no salons to show"})]})]})},at=n(471),rt=n(472),it=n(538),ct=n(541),ot=["label","error"],st=Object(r.forwardRef)((function(e,t){var n=e.label,a=e.error,i=Object(de.a)(e,ot),c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=o[0],d=o[1];return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({},i),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"end",children:Object(x.jsx)(N.a,{onClick:function(){return d((function(e){return!e}))},edge:"end",children:l?Object(x.jsx)(at.a,{}):Object(x.jsx)(rt.a,{})})})},inputRef:t,fullWidth:!0,id:n,label:n,variant:"outlined",type:l?"text":"password",margin:"dense",error:!!a,helperText:null===a||void 0===a?void 0:a.message,size:"small"}))}));st.displayName="PasswordTextField";var lt,dt,jt=st,ut=n(36),bt=function(){var e=E(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=a.isSuccess,c=a.isError,o=a.isLoading,p=Object(P.b)().enqueueSnackbar,O=Object(v.a)(["profile","validation"]),m=Object(s.a)(O,1)[0],h=Object(ut.b)({defaultValues:{currentPassword:"",newPassword:""},mode:"all"}),g=h.handleSubmit,y=h.control,w=h.watch,S=h.reset,k=Object(r.useRef)({});k.current=w("currentPassword","");return Object(r.useEffect)((function(){i&&(p(m("password.successMsg"),{variant:"success"}),S()),c&&p(m("password.errorMsg"),{variant:"error"})}),[i,c]),Object(x.jsxs)(b.a,{component:"main",maxWidth:400,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:m("password.heading")}),Object(x.jsx)(b.a,{component:"form",onSubmit:g((function(e){return n({newPassword:e.newPassword,oldPassword:e.currentPassword})})),children:Object(x.jsxs)(d.a,{spacing:2.5,children:[Object(x.jsx)(ut.a,{name:"currentPassword",control:y,rules:{required:m("common.required",{ns:"validation"}),minLength:{value:8,message:m("common.minLength",{min:8,ns:"validation"})}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(jt,Object(le.a)({label:m("password.input.currentPassword"),error:n},t))}}),Object(x.jsx)(ut.a,{name:"newPassword",control:y,rules:{required:m("common.required",{ns:"validation"}),validate:function(e){return e!==k.current||m("password.cantMatch",{ns:"validation"})},minLength:{value:8,message:m("common.minLength",{min:8,ns:"validation"})}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(jt,Object(le.a)({label:m("password.input.newPassword"),error:n},t))}}),Object(x.jsxs)(d.a,{direction:"row",spacing:2.5,children:[Object(x.jsx)(f,{children:m("delete.action.cancel")}),Object(x.jsx)(j.a,{disabled:o,variant:"contained",fullWidth:!0,size:"large",type:"submit",sx:{color:"common.white"},children:o?Object(x.jsx)(u.a,{size:25}):m("password.action.save")})]})]})})]})},pt=n(25),Ot=n.n(pt),mt=n(34),ht=n(474),xt=n(348),ft=n.n(xt),vt=n(55),gt=n.n(vt),yt=n(473),wt=n(235),St=n.n(wt),kt=n(519),It=Object(m.a)("div")((function(){return{margin:"0 auto 80px",position:"relative",width:216,".files-dropzone::after":{content:"'Drop files here'",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:ne.typography.fontFamily,position:"absolute",inset:0,fontSize:ne.typography.h6.fontSize,borderRadius:"50%",backgroundColor:"transparent",color:"transparent",transition:"background-color ".concat(ne.transitions.duration.shorter,"ms ").concat(ne.transitions.easing.easeInOut,", color ").concat(ne.transitions.duration.shorter,"ms ").concat(ne.transitions.easing.easeInOut," ")},".files-dropzone-active::after":{color:ne.palette.common.white,backgroundColor:ne.palette.text.disabled}}})),Tt=Object(m.a)(kt.a)((function(){return{width:216,height:216}})),Ct=(Object(m.a)("input")((function(){return{display:"none"}})),Object(m.a)("div")((function(){return{position:"absolute",bottom:"5%",right:"5%",background:ne.palette.secondary.main,borderRadius:"50%",zIndex:4,border:"2px solid ".concat(ne.palette.common.white),cursor:"pointer","& svg":{fill:ne.palette.common.white}}}))),zt=function(e){var t=e.url,n=e.handleChangeImg,a=Object(P.b)().enqueueSnackbar,r=Object(v.a)(["profile","validation"]),i=Object(s.a)(r,1)[0],c=function(e){var t=e.code;a(i("file.errors.".concat(t-1)),{variant:"error"})};return Object(x.jsx)(It,{children:Object(x.jsx)(St.a,{accepts:["image/*"],multiple:!1,maxFileSize:2e6,clickable:!1,onChange:n,onError:c,children:Object(x.jsxs)(b.a,{position:"relative",width:"fit-content",children:[Object(x.jsx)(Tt,{alt:"Avatar image",src:t}),Object(x.jsx)(Ct,{children:Object(x.jsx)(St.a,{accepts:["image/*"],multiple:!1,maxFileSize:2e6,onChange:n,onError:c,children:Object(x.jsx)(N.a,{color:"inherit","aria-label":i("edit.form.file.uploadAria"),component:"span",size:"large",children:Object(x.jsx)(yt.a,{})})})})]})})})},Dt="/image-upload",Ft=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),c=Object(s.a)(i,2),o=c[0],p=c[1],O=L(),m=Object(s.a)(O,2),h=m[0],g=m[1],y=g.isSuccess,w=g.isError,k=g.data,I=Object(Ce.d)(),T=Object(P.b)().enqueueSnackbar,C=Object(Ce.e)((function(e){return e.user})),z=Object(r.useState)((null===C||void 0===C?void 0:C.avatarUrl)||void 0),D=Object(s.a)(z,2),F=D[0],A=D[1],q=Object(v.a)(["profile","validation"]),B=Object(s.a)(q,1)[0],E=Object(ut.b)({defaultValues:{fullname:null===C||void 0===C?void 0:C.fullname,email:null===C||void 0===C?void 0:C.email,birthdate:(null===C||void 0===C?void 0:C.birthdate)||"",phone:(null===C||void 0===C?void 0:C.phone)||""},mode:"all"}),W=E.handleSubmit,M=E.control,R=E.setValue,_=E.register,U=E.formState.errors,H=function(){var e=Object(mt.a)(Ot.a.mark((function e(t){var n,r,i;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(le.a)({},t),e.prev=1,a(!0),r=null,null===o){e.next=10;break}return e.next=7,gt.a.post("".concat(S).concat(Dt),o);case 7:i=e.sent,console.log(i),i&&i.data.links&&1===i.data.links.length&&(r=i.data.links[0]);case 10:null!==r&&(n.avatarUrl=r),h(n),a(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),T(B("edit.errorMsg"),{variant:"error"});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){y&&T(B("edit.successMsg"),{variant:"success"}),w&&T(B("edit.errorMsg"),{variant:"error"}),k&&I(Ke(k))}),[y,w,k]),Object(x.jsxs)(b.a,{component:"main",maxWidth:400,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:B("edit.heading")}),Object(x.jsx)(zt,{url:F,handleChangeImg:function(e){var t=new FormData;e&&e.length>0&&e[0].preview.url?(A(e[0].preview.url),t.append("avatar",e[0]),p(t)):p(null)}}),Object(x.jsx)(b.a,{component:"form",onSubmit:W(H),children:Object(x.jsxs)(d.a,{spacing:2.5,children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:B("edit.input.fullname")},_("fullname",{required:B("common.required")})),{},{error:!!U.fullname,helperText:!!U.fullname&&U.fullname.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"email",size:"small",label:B("edit.input.email")},_("email",{required:B("common.required"),minLength:{value:3,message:B("common.minLength",{min:"3"})},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:B("common.invalidFormat",{format:"email"})}})),{},{error:!!U.email,helperText:!!U.email&&U.email.message})),Object(x.jsx)(ut.a,{name:"birthdate",control:M,render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(ht.a,{inputFormat:"dd-MM-yyyy",mask:"__-__-____",label:B("edit.input.birthdate"),onChange:function(e){return R("birthdate",(null===e||void 0===e?void 0:e.toString())||"",{shouldValidate:!0,shouldDirty:!0})},value:t.value,maxDate:new Date,minDate:new Date("1900-01-01"),renderInput:function(e){return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)(Object(le.a)({},e),t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message,fullWidth:!0,size:"small"}))}})}}),Object(x.jsx)(ut.a,{name:"phone",control:M,rules:{pattern:{value:/^$|^___-___-___$|^[0-9]{3}-[0-9]{3}-[0-9]{3}$/,message:B("validation:common.invalidFormat",{format:"phone number"})}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(x.jsx)(ft.a,Object(le.a)(Object(le.a)({},Object(le.a)(Object(le.a)({},t),{},{error:n})),{},{mask:"999-999-999",children:function(e){var t;return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({},e),{},{fullWidth:!0,label:B("edit.input.phonenumber"),type:"tel",size:"small",error:!!e.error,helperText:null===(t=e.error)||void 0===t?void 0:t.message}))}}))}}),Object(x.jsxs)(d.a,{direction:"row",spacing:2.5,children:[Object(x.jsx)(f,{children:B("delete.action.cancel")}),Object(x.jsx)(j.a,{disabled:n,variant:"contained",fullWidth:!0,size:"large",type:"submit",sx:{color:"common.white"},children:n?Object(x.jsx)(u.a,{size:25}):B("edit.action.save")})]})]})})]})},At=n(420),qt=n(504),Bt=n(520),Et="/profile",Wt=gt.a.create({baseURL:S,headers:{Authorization:"Bearer ".concat(D())}}),Lt=function(e){var t=e.children,n=Object(Ce.d)(),a=Object(M.g)(),i=Object(r.useState)(null),c=Object(s.a)(i,2),o=c[0],l=c[1],d=function(){var e=Object(mt.a)(Ot.a.mark((function e(){var t,r;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,Wt.get(Et);case 4:t=e.sent,r=t.data,n(Ke(r.user)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),F(a.push);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){z()&&d()}),[]),!z()||z()&&!1===o?Object(x.jsx)("div",{children:t}):Object(x.jsx)(b.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(u.a,{})})},Pt=n(506),Mt=n(126),Rt={"pl-pl":Pt.a,"en-us":Mt.a},_t=function(e){var t=e.children,n=Object(v.a)(),a=Object(s.a)(n,2)[1].language;return Object(x.jsx)(Lt,{children:Object(x.jsx)(P.a,{children:Object(x.jsx)(At.b,{dateAdapter:qt.a,locale:Rt[a],children:Object(x.jsx)(Bt.a,{theme:ne,children:t})})})})},Ut=n(477),Ht=function(){var e=Object(ut.b)({mode:"onChange"}),t=e.register,n=e.handleSubmit,a=e.formState,r=a.errors,i=a.isDirty,c=a.isValid,o=Object(M.g)(),l=Object(M.j)().url,d=Object(v.a)("login"),j=Object(s.a)(d,1)[0],u=function(){var e=Object(mt.a)(Ot.a.mark((function e(t){var n;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.a.post("".concat(S,"/auth/checkemail"),t);case 2:(n=e.sent).data.exist?o.push({pathname:"".concat(l,"/signin"),state:n.data.email}):o.push({pathname:"".concat(l,"/signup"),state:n.data.email});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("form",{onSubmit:n(u),"data-testid":"form",children:Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",inputProps:{"data-testid":"Email"},label:j("form.email.label"),InputProps:{endAdornment:Object(x.jsx)(N.a,{edge:"end",type:"submit",color:"primary",disabled:!i||!c,"data-testid":"Submit",children:Object(x.jsx)(Ut.a,{})})}},t("email",{required:{value:!0,message:j("form.email.validation.required")},minLength:{value:3,message:j("form.email.validation.minLength")},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:j("form.email.validation.pattern")}})),{},{error:!!r.email,helperText:r.email&&r.email.message}))})},Vt=n(478),Nt=n(479),Qt="/business/salons",Gt=function(e){return"/business/salon/".concat(e,"/info")},Zt=function(e){return"/business/salon/".concat(e,"/schedule")},$t=function(e){return"/business/salon/".concat(e,"/portfolio")},Jt=function(e){return"/business/salon/".concat(e,"/crew")},Kt=function(e){return"/business/salon/".concat(e,"/service")},Yt=function(e){return"/business/salon/".concat(e)},Xt="/business/salon",en=Object(y.a)({reducerPath:"adminPanelApi",baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),tagTypes:["SalonDetails"],endpoints:function(e){return{fetchAllSalons:e.query({query:function(){return"".concat(Qt)}}),fetchSalonData:e.query({query:function(e){var t=e.salonId;return"".concat(Gt(t))},transformResponse:function(e){return e.salon},providesTags:["SalonDetails"]}),fetchSalonSchedule:e.query({query:function(e){var t=e.salonId;return"".concat(Zt(t))}}),fetchSalonPortfolio:e.query({query:function(e){var t=e.salonId;return"".concat($t(t))}}),addCrewMember:e.mutation({query:function(e){var t=e.salonId,n=e.avatarUrl,a=e.fullname;return{url:"".concat(Jt(t)),method:"post",body:{imageUrl:n,name:a}}},invalidatesTags:["SalonDetails"]}),addService:e.mutation({query:function(e){var t=e.salonId,n=e.name,a=e.price,r=e.duration,i=e.description;return{url:"".concat(Kt(t)),method:"post",body:{name:n,price:a,duration:r,description:i}}},invalidatesTags:["SalonDetails"]}),updateSalon:e.mutation({query:function(e){var t=e.salonId,n=e.salon;return{url:"".concat(Yt(t)),method:"PATCH",body:{name:n.name,address:n.address,city:n.city,contact:{phone:n.phone,email:n.email},description:n.description}}},invalidatesTags:["SalonDetails"]}),createSalon:e.mutation({query:function(e){return{url:Xt,method:"post",body:Object(le.a)({},e)}},invalidatesTags:["SalonDetails"]})}}}),tn=en.useFetchAllSalonsQuery,nn=en.useFetchSalonDataQuery,an=en.useFetchSalonPortfolioQuery,rn=en.useFetchSalonScheduleQuery,cn=en.useAddCrewMemberMutation,on=en.useAddServiceMutation,sn=en.useUpdateSalonMutation,ln=en.useCreateSalonMutation,dn=function(e){return"/salons/".concat(e)},jn="/salons/service",un="/salons/rating",bn="/salons/freehours",pn="/salons/reservation",On=Object(y.a)({reducerPath:"salonApi",tagTypes:["Salon","Reservation"],baseQuery:Object(w.d)({baseUrl:S,prepareHeaders:function(e){return A(e)}}),endpoints:function(e){return{fetchSpecifiedSalonData:e.query({query:function(e){var t=e.salonId;return{url:"".concat(dn(t))}},transformResponse:function(e){return e.salon},providesTags:["Salon"]}),addReview:e.mutation({query:function(e){return{url:"".concat(un),method:"POST",body:e}},invalidatesTags:["Salon"]}),fetchService:e.query({query:function(e){return{url:jn,method:"POST",body:e}}}),getFreeHours:e.query({query:function(e){return{url:"".concat(bn),method:"POST",body:e}},providesTags:["Reservation"]}),confirmReservation:e.mutation({query:function(e){return{url:"".concat(pn),method:"POST",body:e}},invalidatesTags:["Reservation"]})}}}),mn=On.useFetchSpecifiedSalonDataQuery,hn=On.useAddReviewMutation,xn=On.useFetchServiceQuery,fn=On.useLazyGetFreeHoursQuery,vn=On.useConfirmReservationMutation,gn=Object(ze.a)({reducer:(lt={user:et,salonsFilters:Ae},Object(Y.a)(lt,en.reducerPath,en.reducer),Object(Y.a)(lt,q.reducerPath,q.reducer),Object(Y.a)(lt,ye.reducerPath,ye.reducer),Object(Y.a)(lt,On.reducerPath,On.reducer),lt),middleware:function(e){return e().concat(en.middleware,On.middleware,ye.middleware,q.middleware)}}),yn=function(){return Object(Ce.d)()},wn=gn,Sn=Object(m.a)("form")((function(){return{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1}})),kn=Object(m.a)(j.a)((function(){return{marginTop:ne.spacing(2)}})),In=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(M.h)(),c=Object(M.g)(),o=yn(),l=Object(v.a)("login"),d=Object(s.a)(l,1)[0],j=Object(ut.b)({mode:"onBlur",defaultValues:{email:i.state,password:""}}),u=j.register,b=j.handleSubmit,p=j.formState,O=p.errors,m=p.isDirty,h=p.isValid,f=function(){var e=Object(mt.a)(Ot.a.mark((function e(t){var n;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt.a.post("".concat(S,"/auth/signin"),t);case 3:n=e.sent,localStorage.setItem("JWT_TOKEN",n.data.token),o(Ke(n.data.user)),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.error.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(Sn,{onSubmit:b(f),children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:d("form.email.label"),margin:"normal"},u("email",{required:{value:!0,message:d("form.email.validation.required")},minLength:{value:3,message:d("form.email.validation.minLength")},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:d("form.email.validation.pattern")}})),{},{error:!!O.email,helperText:!!O.email&&O.email.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:n?"text":"password",size:"small",label:d("form.password.label"),margin:"normal",InputProps:{endAdornment:Object(x.jsx)(N.a,{edge:"end",onClick:function(){a(!n)},children:n?Object(x.jsx)(Vt.a,{}):Object(x.jsx)(Nt.a,{})})}},u("password",{required:{value:!0,message:d("form.password.validation.required")},minLength:{value:8,message:d("form.password.validation.minLength")}})),{},{error:!!O.password,helperText:!!O.password&&O.password.message})),Object(x.jsx)(kn,{type:"submit",variant:"contained",disableElevation:!0,disabled:!m||!h,children:d("form.signInButton.label")})]})},Tn=n(470),Cn=n(480),zn=n(544),Dn=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(M.h)(),c=Object(M.g)(),o=yn(),l=Object(v.a)("login"),d=Object(s.a)(l,1)[0],j=Object(ut.b)({mode:"onBlur",defaultValues:{fullname:"",email:i.state,password:"",role:""}}),u=j.register,b=j.handleSubmit,p=j.formState,O=p.errors,m=p.isDirty,h=p.isValid,f=function(){var e=Object(mt.a)(Ot.a.mark((function e(t){var n;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt.a.post("".concat(S,"/auth/signup"),t);case 3:n=e.sent,localStorage.setItem("JWT_TOKEN",n.data.token),o(Ke(n.data.user)),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.error.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(Sn,{onSubmit:b(f),children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:"Fullname",margin:"normal"},u("fullname",{required:{value:!0,message:"Field is required"},minLength:{value:3,message:"Field should contains at least 3 characters"}})),{},{error:!!O.fullname,helperText:!!O.fullname&&O.fullname.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:"text",size:"small",label:d("form.email.label"),margin:"normal"},u("email",{required:{value:!0,message:d("form.email.validation.required")},minLength:{value:3,message:d("form.email.validation.minLength")},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:d("form.email.validation.pattern")}})),{},{error:!!O.email,helperText:!!O.email&&O.email.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",type:n?"text":"password",size:"small",label:d("form.password.label"),margin:"normal",InputProps:{endAdornment:Object(x.jsx)(N.a,{edge:"end",onClick:function(){a(!n)},children:n?Object(x.jsx)(Vt.a,{}):Object(x.jsx)(Nt.a,{})})}},u("password",{required:{value:!0,message:d("form.password.validation.required")},minLength:{value:8,message:d("form.password.validation.minLength")}})),{},{error:!!O.password,helperText:!!O.password&&O.password.message})),Object(x.jsxs)(ue.a,{component:"fieldset",children:[Object(x.jsx)(Tn.a,{component:"legend",children:"Account type"}),Object(x.jsxs)(Cn.a,{name:"account-type",defaultValue:ce.Standard,children:[Object(x.jsx)(zn.a,Object(le.a)({value:ce.Standard,control:Object(x.jsx)(Z.a,{}),label:"Standard"},u("role",{required:!0}))),Object(x.jsx)(zn.a,Object(le.a)({value:ce.Business,control:Object(x.jsx)(Z.a,{}),label:"Business"},u("role",{required:!0})))]})]}),Object(x.jsx)(kn,{type:"submit",variant:"contained",disableElevation:!0,disabled:!m||!h,children:d("form.signInButton.label")})]})},Fn=Object(m.a)(_.a)((function(){return{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}})),An=function(){var e=Object(M.j)().path;return Object(x.jsx)(Fn,{children:Object(x.jsxs)(H.a,{container:!0,justifyContent:"center",children:[Object(x.jsx)(H.a,{item:!0,xs:12,container:!0,justifyContent:"center",rowSpacing:10,children:Object(x.jsx)(l.a,{variant:"h3",component:"h1",children:"Voirsy"})}),Object(x.jsx)(H.a,{item:!0,xs:12,sm:6,lg:4,container:!0,justifyContent:"center",children:Object(x.jsxs)(M.d,{children:[Object(x.jsx)(M.b,{exact:!0,path:"/login",children:Object(x.jsx)(Ht,{})}),Object(x.jsx)(M.b,{path:"".concat(e,"/signin"),children:Object(x.jsx)(In,{})}),Object(x.jsx)(M.b,{path:"".concat(e,"/signup"),children:Object(x.jsx)(Dn,{})})]})})]})})},qn=Object(m.a)(b.a)((function(){var e;return e={display:"flex",alignItems:"center",justifyContent:"center",height:"calc(100vh - ".concat(ne.mixins.toolbar.minHeight,"px)")},Object(Y.a)(e,ne.breakpoints.up("sm"),{height:"calc(100vh - ".concat(ne.mixins.toolbar["@media (min-width:600px)"].minHeight,"px)")}),Object(Y.a)(e,"@media (orientation: landscape)",{height:"calc(100vh - ".concat(ne.mixins.toolbar["@media (min-width:0px) and (orientation: landscape)"].minHeight,"px)")}),e})),Bn=function(){return Object(x.jsx)(qn,{children:Object(x.jsx)(u.a,{})})},En=(Object(m.a)(b.a)((function(){return{display:"flex",justifyContent:"space-between",alignItems:"center"}})),Object(m.a)(b.a)((function(){return Object(Y.a)({display:"none"},ne.breakpoints.up("md"),{display:"block",minWidth:"250px",maxWidth:"250px"})}))),Wn=n(512),Ln=n(545),Pn=function(){var e=Object(M.i)().salonId,t=Object(V.a)(ne.breakpoints.down("md")),n=Object(M.j)(["/salons/:salonId/calendar","/salons/:salonId/portfolio","/salons/:salonId/details"]),a=null===n||void 0===n?void 0:n.path,r=Object(v.a)("admin"),i=Object(s.a)(r,1)[0];return Object(x.jsxs)(Wn.a,{"aria-label":i("salonTemplate.nav.aria"),value:a,variant:t?"fullWidth":"standard",children:[Object(x.jsx)(Ln.a,{component:p.b,label:i("salonTemplate.nav.details"),value:"/salons/:salonId/details",to:"/salons/".concat(e,"/details")}),Object(x.jsx)(Ln.a,{component:p.b,label:i("salonTemplate.nav.calendar"),value:"/salons/:salonId/calendar",to:"/salons/".concat(e,"/calendar")}),Object(x.jsx)(Ln.a,{component:p.b,label:i("salonTemplate.nav.portfolio"),value:"/salons/:salonId/portfolio",to:"/salons/".concat(e,"/portfolio")})]})},Mn=n(481),Rn=n(482),_n=n(483),Un=n(546),Hn=n(547),Vn=n(360),Nn=Object(m.a)(Un.a)((function(){return{justifyContent:"flex-end"}})),Qn=Object(m.a)(Hn.a)((function(){var e;return e={},Object(Y.a)(e,ne.breakpoints.down("md"),{".MuiDrawer-paper":{width:"100%"}}),Object(Y.a)(e,".MuiDrawer-paper",{border:0}),e})),Gn=Object(m.a)(Vn.a,{shouldForwardProp:function(e){return"active"!==e}})((function(e){var t=e.active;return{padding:ne.spacing(1),"& a":{textDecoration:"none",color:t?ne.palette.primary.main:ne.palette.text.primary}}})),Zn=function(e){var t=e.data,n=Object(v.a)(["admin","common"]),a=Object(s.a)(n,1)[0],r=Object(M.i)().salonId,i=ke(),c=i.data;return i.isLoading||void 0===c?null:Object(x.jsxs)(d.a,{spacing:2,sx:{paddingBottom:3},children:[Object(x.jsx)(l.a,{variant:"h5",children:a("salonTemplate.heading.mySalons")}),Object(x.jsx)(j.a,{variant:"outlined",color:"primary",endIcon:Object(x.jsx)(Mn.a,{}),size:"large",component:p.b,to:"/salons/create-salon",children:a("salonTemplate.addSalon")}),t.salons.length>0&&t.salons.map((function(e){var t,n=e._id,i=e.name,o=e.address,s=e.city,j=e.type;return Object(x.jsx)(Gn,{active:r===n,variant:"outlined",children:Object(x.jsxs)(p.b,{to:"/salons/".concat(n,"/details"),children:[Object(x.jsx)(l.a,{variant:"subtitle1",noWrap:!0,children:i}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,alignItems:"center",color:ne.palette.text.secondary,children:[Object(x.jsx)(Rn.a,{}),Object(x.jsx)(l.a,{variant:"body2",noWrap:!0,children:o})]}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,alignItems:"center",color:ne.palette.text.secondary,children:[Object(x.jsx)(_n.a,{}),Object(x.jsx)(l.a,{variant:"body2",noWrap:!0,sx:{textTransform:"capitalize"},children:null===(t=c.cities.find((function(e){return e._id===s})))||void 0===t?void 0:t.name})]}),Object(x.jsx)(d.a,{direction:"row",spacing:.5,alignItems:"center",marginTop:1,children:j.map((function(e,t){return Object(x.jsx)(oe.a,{size:"small",color:"secondary",label:a("common:salonType.".concat(e.toLowerCase()))},t)}))})]})},n)}))]})},$n=function(e){var t=e.children,n=Object(v.a)("admin"),a=Object(s.a)(n,1)[0],i=tn(),c=i.data,o=void 0===c?{salons:[],message:""}:c,j=i.isFetching,u=i.isError,p=Object(M.g)();return Object(r.useEffect)((function(){!1===j&&o.salons.length&&p.replace("/salons/".concat(o.salons[0]._id,"/details"))}),[j]),j?Object(x.jsx)(Bn,{}):u?Object(x.jsx)(l.a,{variant:"h5",textAlign:"center",marginTop:5,children:a("salonTemplate.error")}):Object(x.jsx)(_.a,{maxWidth:!1,children:Object(x.jsxs)(d.a,{direction:"row",spacing:2,children:[Object(x.jsx)(En,{children:Object(x.jsx)(Zn,{data:o})}),Object(x.jsx)(b.a,{display:"flex",flexDirection:"column",flexGrow:1,children:o.salons.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Pn,{}),t]}):Object(x.jsx)(b.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(l.a,{variant:"h5",textAlign:"center",children:Object(x.jsx)(g.a,{defaults:a("salonTemplate.noSalons"),components:[Object(x.jsx)("br",{},"breakLine")]})})})})]})})},Jn=n(485),Kn=n(486),Yn=n(539),Xn=n(529),ea=n(521),ta=n(550),na=n(522),aa=n(551),ra=n(552),ia=n(484),ca=n(475),oa=n(548),sa=n(542),la=n(543),da=function(e){var t,n=e.open,a=e.close,i=Object(ut.b)({mode:"all"}),c=i.register,o=i.handleSubmit,l=i.setValue,u=i.formState,b=u.errors,p=u.isDirty,O=u.isValid,m=Object(M.i)().salonId,h=cn(),f=Object(s.a)(h,2),g=f[0],y=f[1],w=y.isSuccess,k=y.isError,I=Object(v.a)("admin"),T=Object(s.a)(I,1)[0],C=Object(r.useState)(void 0),z=Object(s.a)(C,2),D=z[0],F=z[1],A=Object(P.b)().enqueueSnackbar;Object(r.useEffect)((function(){return w&&A(T("crewDialog.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),k&&A(T("crewDialog.operationError"),{variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),function(){a(),F(void 0)}}),[w,k]);var q=function(){var e=Object(mt.a)(Ot.a.mark((function e(t){var n,a,r,i;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.fullname,a="",!t.avatar){e.next=15;break}return(r=new FormData).append("avatar",t.avatar),e.prev=5,e.next=8,gt()({method:"post",url:"".concat(S,"/image-upload"),data:r,headers:{"Content-Type":"multipart/form-data"}});case 8:i=e.sent,a=i.data.links[0],e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:g({salonId:m,avatarUrl:a,fullname:n});case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(ca.a,{open:n,maxWidth:"md",fullWidth:!0,children:[Object(x.jsx)(oa.a,{children:Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[T("admin:crewDialog.title"),Object(x.jsx)(N.a,{onClick:a,children:Object(x.jsx)(ia.a,{})})]})}),Object(x.jsx)(sa.a,{children:Object(x.jsx)(H.a,{container:!0,justifyContent:"center",paddingTop:3,children:Object(x.jsx)(H.a,{item:!0,xs:8,children:Object(x.jsx)("form",{children:Object(x.jsxs)(d.a,{spacing:2,direction:"row",alignItems:"center",children:[Object(x.jsx)("input",{type:"file",id:"avatar-image-upload",accept:"image/png, image/jpeg",onChange:function(e){return function(e){var t,n,a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],r=URL.createObjectURL(a);l("avatar",a),F(r)}(e)},hidden:!0}),Object(x.jsx)("label",{htmlFor:"avatar-image-upload",children:Object(x.jsx)(kt.a,{sx:{width:48,height:48},src:D})}),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:T("admin:crewDialog.fullname")},c("fullname",{required:{value:!0,message:T("crewDialog.form.required")}})),{},{sx:{flexGrow:1},error:!!b.fullname,helperText:null===(t=b.fullname)||void 0===t?void 0:t.message}))]})})})})}),Object(x.jsx)(la.a,{sx:{padding:ne.spacing(2,3)},children:Object(x.jsx)(j.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!p||!O,onClick:o(q),children:T("admin:confirmButton")})})]})},ja=Object(m.a)(Vn.a)((function(){return{padding:ne.spacing(1),flexGrow:1}})),ua=function(e){var t,n,a,i,c=e.open,o=e.close,l=Object(ut.b)({mode:"all"}),u=l.register,b=l.handleSubmit,p=l.formState,O=p.errors,m=p.isDirty,h=p.isValid,f=Object(v.a)("admin"),g=Object(s.a)(f,1)[0],y=on(),w=Object(s.a)(y,2),S=w[0],k=w[1],I=k.isSuccess,T=k.isError,C=Object(M.i)().salonId,z=Object(P.b)().enqueueSnackbar;return Object(r.useEffect)((function(){return I&&z(g("serviceDialog.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),T&&z(g("serviceDialog.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),function(){return o()}}),[I,T]),Object(x.jsxs)(ca.a,{open:c,maxWidth:"md",fullWidth:!0,children:[Object(x.jsx)(oa.a,{children:Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[g("admin:serviceDialog.title"),Object(x.jsx)(N.a,{onClick:o,children:Object(x.jsx)(ia.a,{})})]})}),Object(x.jsx)(sa.a,{children:Object(x.jsx)(H.a,{container:!0,justifyContent:"center",paddingTop:3,children:Object(x.jsx)(H.a,{item:!0,xs:8,children:Object(x.jsx)("form",{children:Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.name")},u("name")),{},{error:!!O.name,helperText:null===(t=O.name)||void 0===t?void 0:t.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.price"),type:"number"},u("price")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"\u20ac"}),inputProps:{min:0}},error:!!O.price,helperText:null===(n=O.price)||void 0===n?void 0:n.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.duration"),type:"number",multiline:!0,maxRows:4},u("duration")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"min"}),inputProps:{min:0,step:1}},error:!!O.duration,helperText:null===(a=O.duration)||void 0===a?void 0:a.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:g("admin:serviceDialog.description")},u("description")),{},{error:!!O.description,helperText:null===(i=O.description)||void 0===i?void 0:i.message}))]})})})})}),Object(x.jsx)(la.a,{sx:{padding:ne.spacing(2,3)},children:Object(x.jsx)(j.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!m||!h,onClick:b((function(e){S(Object(le.a)({salonId:C},e))})),children:g("admin:confirmButton")})})]})},ba=function(){var e=Object(M.i)().salonId,t=nn({salonId:e}),n=t.data,a=t.isFetching,i=Object(ut.b)(),c=i.register,o=i.handleSubmit,p=i.setValue,O=i.formState,m=O.isDirty,h=O.isValid,f=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.currency})),g=Object(r.useState)(!1),y=Object(s.a)(g,2),w=y[0],S=y[1],k=Object(r.useState)(!1),I=Object(s.a)(k,2),T=I[0],C=I[1],z=Object(v.a)("admin"),D=Object(s.a)(z,1)[0],F=ke().data,A=Object(r.useState)(""),q=Object(s.a)(A,2),B=q[0],E=q[1],W=sn(),L=Object(s.a)(W,2),R=L[0],_=L[1],U=_.isSuccess,V=_.isError,Q=Object(P.b)().enqueueSnackbar;Object(r.useEffect)((function(){a||(p("name",null===n||void 0===n?void 0:n.name,{shouldDirty:!1}),p("address",null===n||void 0===n?void 0:n.address,{shouldDirty:!1}),p("city",null===n||void 0===n?void 0:n.city,{shouldDirty:!1}),p("phone",null===n||void 0===n?void 0:n.phone,{shouldDirty:!1}),p("email",null===n||void 0===n?void 0:n.email,{shouldDirty:!1}),p("description",null===n||void 0===n?void 0:n.description,{shouldDirty:!1}),E(null===n||void 0===n?void 0:n.city))}),[n,a]),Object(r.useEffect)((function(){return U&&Q(D("details.operationSuccess"),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),V&&Q(D("details.operationError"),{variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),function(){return close()}}),[U,V]);return a?Object(x.jsx)(b.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(u.a,{})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(H.a,{container:!0,spacing:2,paddingY:2,children:[Object(x.jsx)(H.a,{item:!0,container:!0,direction:"column",xs:12,lg:6,children:Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsxs)(ja,{variant:"outlined",children:[Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",marginBottom:2,children:[Object(x.jsx)(l.a,{component:"h3",variant:"h6",children:D("details.informations.title")}),Object(x.jsx)(j.a,{variant:"text",size:"small",disabled:!m||!h,onClick:o((function(t){R({salonId:e,salon:t})})),children:D("confirmButton")})]}),Object(x.jsx)("form",{children:Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:D("details.informations.salonName"),size:"small"},c("name"))),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:D("details.informations.address"),size:"small"},c("address"))),Object(x.jsxs)(ue.a,{children:[Object(x.jsx)(Yn.a,{id:"select-label",children:D("details.informations.city")}),Object(x.jsx)(je.a,{labelId:"select-label",value:B,onChange:function(e){return function(e){var t=e.target.value;p("city",t,{shouldDirty:!0}),E(t)}(e)},variant:"outlined",label:D("details.informations.city"),size:"small",sx:{"& > div":{height:"1.4375em !important"},"& span.MuiTypography-root":{lineHeight:"1 !important"}},children:null===F||void 0===F?void 0:F.cities.map((function(e){return Object(x.jsx)(G.a,{value:e._id,sx:{textTransform:"capitalize"},children:Object(x.jsx)($.a,{primary:e.name})},e._id)}))})]}),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:D("details.informations.phone"),size:"small"},c("phone"))),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:D("details.informations.email"),size:"small"},c("email"))),Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",label:D("details.informations.description"),size:"small",multiline:!0,maxRows:4},c("description")))]})})]}),Object(x.jsxs)(ja,{variant:"outlined",children:[Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(x.jsx)(l.a,{component:"h3",variant:"h6",children:D("details.crew.title")}),Object(x.jsx)(N.a,{size:"small",color:"primary",onClick:function(){return C(!0)},children:Object(x.jsx)(Jn.a,{})})]}),Object(x.jsx)(Xn.a,{children:(null===n||void 0===n?void 0:n.crew)&&n.crew.map((function(e){return Object(x.jsxs)(ea.a,{children:[Object(x.jsx)(ta.a,{children:Object(x.jsx)(kt.a,{src:e.imageUrl})}),Object(x.jsx)($.a,{primary:e.name})]},e._id)}))})]})]})}),Object(x.jsx)(H.a,{item:!0,container:!0,xs:12,lg:6,alignItems:"stretch",children:Object(x.jsxs)(ja,{variant:"outlined",children:[Object(x.jsxs)(H.a,{container:!0,justifyContent:"space-between",alignItems:"center",marginBottom:1,children:[Object(x.jsx)(l.a,{component:"h3",variant:"h6",children:D("details.services.title")}),Object(x.jsx)(N.a,{size:"small",color:"primary",onClick:function(){return S(!0)},children:Object(x.jsx)(Jn.a,{})})]}),(null===n||void 0===n?void 0:n.services)&&n.services.map((function(e){return Object(x.jsxs)(na.a,{elevation:0,children:[Object(x.jsx)(aa.a,{expandIcon:Object(x.jsx)(Kn.a,{}),children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)(l.a,{variant:"subtitle1",component:"p",children:e.name}),Object(x.jsxs)(d.a,{direction:"row",spacing:1,color:ne.palette.text.secondary,children:[Object(x.jsx)(l.a,{variant:"body2",component:"p",children:"".concat(D("details.services.price"),": ").concat(e.price," ").concat(f)}),Object(x.jsx)(l.a,{variant:"body2",component:"p",children:"".concat(D("details.services.duration"),": ").concat(e.duration," min")})]})]})}),Object(x.jsx)(ra.a,{children:Object(x.jsx)(l.a,{variant:"body2",component:"p",children:e.description})})]},e._id)}))]})})]}),w&&Object(x.jsx)(ua,{open:w,close:function(){return S(!1)}}),T&&Object(x.jsx)(da,{open:T,close:function(){return C(!1)}})]})},pa=function(){var e=Object(M.i)().salonId,t=an({salonId:e}),n=t.data;return t.isFetching?Object(x.jsx)(b.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(u.a,{})}):Object(x.jsx)(b.a,{p:1.5,children:Object(x.jsx)(l.a,{sx:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(n)})})},Oa=function(){var e=Object(M.i)().salonId,t=rn({salonId:e}),n=t.data;return t.isFetching?Object(x.jsx)(b.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(u.a,{})}):Object(x.jsx)(b.a,{p:1.5,children:Object(x.jsx)(l.a,{sx:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(n)})})},ma=function(){var e=Object(v.a)("profile"),t=Object(s.a)(e,1)[0],n=B(),a=n.data,i=void 0===a?[]:a,c=n.isError,o=n.isFetching,d=n.refetch,j=Object(V.a)(ne.breakpoints.up("lg"));return Object(r.useEffect)((function(){d()}),[]),o?Object(x.jsx)(Bn,{}):c?Object(x.jsx)(l.a,{textAlign:"center",children:t("favorites.error.unknown")}):Object(x.jsxs)(b.a,{component:"main",maxWidth:j?700:380,margin:"0 auto",padding:2,children:[Object(x.jsx)(l.a,{marginBottom:6,variant:"h4",component:"h1",textAlign:"center",children:t("favorites.heading")}),i.length>0?Object(x.jsx)(H.a,{container:!0,spacing:2,children:i.map((function(e){return Object(x.jsx)(H.a,{item:!0,xs:12,lg:6,children:Object(x.jsx)(tt,{_id:e._id,address:e.address,city:e.city,imageUrl:e.imageUrl,name:e.name,salonType:e.type,rating:e.rating})},e._id)}))}):Object(x.jsx)(l.a,{variant:"h6",textAlign:"center",children:t("favorites.error.noFavorites")})]})},ha=n(424),xa=n(350),fa=n.n(xa),va=Object(m.a)(U.a)((function(){var e;return e={display:"flex",flexDirection:"column",position:"absolute",inset:0,width:"100%",maxWidth:"1000px",backgroundColor:ne.palette.background.paper,borderRadius:ne.shape.borderRadius,overflowY:"auto",overflowX:"hidden"},Object(Y.a)(e,ne.breakpoints.up("md"),{top:ne.spacing(4),bottom:ne.spacing(4),left:"50%",transform:"translateX(-50%)"}),Object(Y.a)(e,":focus-visible",{outline:"none"}),e})),ga=Object(m.a)(N.a)((function(){return Object(Y.a)({alignSelf:"center",padding:"2px","> svg":{fontSize:"34px"}},ne.breakpoints.up("md"),{"> svg":{fontSize:"46px"}})})),ya=Object(m.a)(l.a)((function(){return Object(Y.a)({fontSize:"18px",fontWeight:ne.typography.fontWeightBold,color:ne.palette.text.primary},ne.breakpoints.up("md"),{fontSize:"28px"})})),wa=Object(m.a)(l.a)((function(){return Object(Y.a)({color:ne.palette.text.primary},ne.breakpoints.up("md"),{fontSize:"14px"})})),Sa=function(e){var t=e.currentTab,n=Object(M.i)().salonId,a=Object(v.a)("salon"),r=Object(s.a)(a,1)[0],i=Object(V.a)(ne.breakpoints.down("md"));return Object(x.jsx)(U.a,{paddingLeft:i?0:2,maxWidth:"100%",children:Object(x.jsxs)(Wn.a,{"aria-label":r("salon:nav.aria"),value:t,variant:i?"fullWidth":"standard",indicatorColor:"secondary",textColor:"secondary",children:[Object(x.jsx)(Ln.a,{component:p.b,label:r("salon:nav.info"),value:"/:salonId",to:"/".concat(n)}),Object(x.jsx)(Ln.a,{component:p.b,label:r("salon:nav.reviews"),value:"/:salonId/reviews",to:"/".concat(n,"/reviews")}),Object(x.jsx)(Ln.a,{component:p.b,label:r("salon:nav.portfolio"),value:"/:salonId/portfolio",to:"/".concat(n,"/portfolio")})]})})},ka=Object(m.a)("img")((function(){return{maxWidth:"100%",marginBottom:ne.spacing(1.5)}})),Ia=Object(m.a)(U.a)((function(){return{borderRadius:ne.shape.borderRadius,border:"1px solid ".concat(ne.palette.grey[300]),padding:ne.spacing(1.25),marginBottom:ne.spacing(1.25)}})),Ta=Object(m.a)(l.a)((function(){return{color:ne.palette.text.secondary,fontSize:ne.typography.overline.fontSize}})),Ca=Object(m.a)(l.a)((function(){return{fontSize:ne.typography.body2.fontSize,marginBottom:ne.spacing(1.25)}})),za=Object(m.a)(l.a)((function(){return{fontWeight:ne.typography.fontWeightBold}})),Da=n(487);!function(e){e.Monday="monday",e.Tuesday="tuesday",e.Wednesday="wednesday",e.Thursday="thursday",e.Friday="friday",e.Saturday="saturday",e.Sunday="sunday"}(dt||(dt={}));var Fa,Aa,qa=function(e){var t=e.openingHours,n=Object(v.a)(),a=Object(s.a)(n,1)[0],r=Object.values(dt).map((function(e){return t.find((function(t){return t.name===e}))||{name:e,open:null,close:null}}));return Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ta,{variant:"button",children:a("salon:details.openingHours.label")}),r.map((function(e){var t=e.name,n=e.open,r=e.close;return Object(x.jsxs)(d.a,{direction:"row",spacing:1.25,justifyContent:"space-between",children:[Object(x.jsx)(l.a,{sx:{textTransform:"capitalize"},children:a("salon:details.openingHours.daysOfTheWeek.".concat(t.toLowerCase()))}),Object(x.jsx)(l.a,{children:n&&r?"".concat(n," - ").concat(r):"closed"})]},t)}))]})},Ba=function(e){var t=e.phone,n=e.openingHours,a=e.description,r=e.crew,i=Object(v.a)(),c=Object(s.a)(i,1)[0];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ta,{variant:"button",children:c("salon:details.contact.label")}),Object(x.jsxs)(d.a,{direction:"row",spacing:1.25,justifyContent:"space-between",children:[Object(x.jsx)(Da.a,{}),Object(x.jsx)(l.a,{children:t.replace(/ /g,"").split(/(.{3})/).join(" ")})]})]}),Object(x.jsx)(qa,{openingHours:n}),Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ta,{variant:"button",children:c("salon:details.aboutUs.label")}),Object(x.jsx)(l.a,{children:a})]}),r.length>0&&Object(x.jsxs)(Ia,{children:[Object(x.jsx)(Ta,{variant:"button",children:c("salon:details.crew.label")}),Object(x.jsx)(d.a,{overflow:"auto",marginTop:1.25,direction:"row",spacing:2,children:r.map((function(e){return Object(x.jsxs)(d.a,{spacing:1,alignItems:"center",width:"fit-content",children:[Object(x.jsx)(kt.a,{src:e.imageUrl,alt:e.name,sx:{width:70,height:70}}),Object(x.jsx)(l.a,{variant:"body1",children:e.name})]},e._id)}))})]})]})},Ea=n(488),Wa=function(e){var t=Object(Ea.a)(e),n="";return 0!==t&&(n+="".concat(t,"h")),n+=" ".concat(e-60*t,"min")},La=function(e){var t=e._id,n=e.name,a=e.description,r=e.price,i=e.duration,c=Object(v.a)("salon"),o=Object(s.a)(c,1)[0],u=Object(M.i)().salonId,b=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role})),O=z()&&b===ce.Standard;return Object(x.jsxs)(Ia,{children:[Object(x.jsxs)(d.a,{direction:"row",justifyContent:"space-between",alignItems:"center",marginBottom:1,children:[Object(x.jsxs)(d.a,{direction:"row",children:[Object(x.jsxs)(za,{children:[n,"\xa0"]}),Object(x.jsx)(l.a,{children:"\u2022 ".concat(Wa(i))})]}),Object(x.jsxs)(l.a,{children:[r,"$"]})]}),Object(x.jsxs)(d.a,{direction:"row",justifyContent:"space-between",children:[Object(x.jsx)(l.a,{children:a}),O&&Object(x.jsx)(j.a,{variant:"contained",color:"secondary",size:"small",component:p.b,to:"/".concat(u,"/reservation/").concat(t),children:o("salon:bookButton.label")})]})]})},Pa=function(e){var t=e.description,n=e.imageUrl,a=e.phone,r=e.openingHours,i=e.services,c=e.crew,o=Object(V.a)(ne.breakpoints.down("md")),l=Object(v.a)("salon"),j=Object(s.a)(l,1)[0];return Object(x.jsxs)(d.a,{direction:o?"column":"row",spacing:1.5,children:[Object(x.jsxs)(U.a,{width:"100%",children:[Object(x.jsx)(ka,{src:n,alt:j("salon:salonImg.alt"),sx:{borderRadius:1}}),Object(x.jsx)(U.a,{sx:{display:o?"block":"none"},children:Object(x.jsx)(Ba,{description:t,phone:a,openingHours:r,crew:c})}),Object(x.jsxs)("div",{children:[Object(x.jsx)(Ca,{variant:"button",paragraph:!0,children:j("salon:details.ourServices.label")}),Object(x.jsx)("div",{children:i.map((function(e){return Object(x.jsx)(La,Object(le.a)({},e),e._id)}))})]})]}),Object(x.jsx)(U.a,{sx:{display:o?"none":"block",minWidth:"300px",width:"300px"},children:Object(x.jsx)(Ba,{description:t,phone:a,openingHours:r,crew:c})})]})},Ma=n(489),Ra=n(490),_a=n(513),Ua=n(417),Ha=Object(m.a)(l.a)((function(){return{fontSize:ne.typography.h3.fontSize,color:ne.palette.grey[400],textAlign:"center"}})),Va=Object(m.a)("div")((function(){return{svg:{width:"80px",height:"80px",fill:ne.palette.grey[400]}}})),Na=function(e){var t=e.icon,n=e.text;return Object(x.jsx)(U.a,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsxs)(d.a,{spacing:1.25,alignItems:"center",children:[Object(x.jsx)(Va,{children:t}),Object(x.jsx)(Ha,{children:n})]})})},Qa=n(553),Ga=Object(m.a)(Qa.a)((function(){return{position:"absolute",bottom:ne.spacing(3),right:ne.spacing(3)}})),Za=Object(m.a)(Vn.a)((function(){return{padding:ne.spacing(2),height:"calc(100% - ".concat(ne.spacing(4),")")}})),$a=Object(m.a)(U.a)((function(){return{position:"absolute",zIndex:ne.zIndex.modal+1,background:"white",bottom:0,left:0,right:0,borderTop:"1px solid ".concat(ne.palette.grey[300]),padding:ne.spacing(2)}})),Ja=n(354),Ka=function(e){var t=e.reviews,n=void 0===t?[]:t,a=Object(v.a)("salon"),i=Object(s.a)(a,1)[0],c=Object(Ce.e)((function(e){return e.user})),o=Object(M.i)().salonId,u=n.find((function(e){return e.authorId===(null===c||void 0===c?void 0:c.id)})),b=Object(r.useState)(!1),p=Object(s.a)(b,2),O=p[0],m=p[1],h=Object(r.useState)(""),f=Object(s.a)(h,2),g=f[0],y=f[1],w=Object(r.useState)(null),S=Object(s.a)(w,2),k=S[0],I=S[1],T=hn(),C=Object(s.a)(T,2),D=C[0],F=C[1],A=F.isError,q=F.isSuccess,B=Object(P.b)().enqueueSnackbar,E=z()&&(null===c||void 0===c?void 0:c.role)!==ce.Business&&!u&&!O;return Object(r.useEffect)((function(){A&&B(i("salon:reviews.errorMsg"),{variant:"error"}),q&&B(i("salon:reviews.successMsg"),{variant:"success"})}),[A,q]),Object(x.jsxs)(x.Fragment,{children:[0===n.length?Object(x.jsx)(Na,{text:i("salon:reviews.noReviews"),icon:Object(x.jsx)(Ma.a,{})}):Object(x.jsx)(H.a,{container:!0,spacing:2.5,children:n.map((function(e){return Object(x.jsx)(H.a,{item:!0,xs:12,md:6,children:Object(x.jsxs)(Za,{children:[Object(x.jsxs)(d.a,{direction:"row",justifyContent:"space-between",marginBottom:1,children:[Object(x.jsxs)(d.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[Object(x.jsx)(kt.a,{alt:e.name,src:e.avatarUrl}),Object(x.jsx)($.a,{primary:e.name,secondary:Object(Ja.a)(new Date(e.date),"dd MMM y")})]}),Object(x.jsx)(_a.a,{name:"Salon rating",value:parseInt(e.rating,10),readOnly:!0})]}),Object(x.jsx)(l.a,{variant:"body1",children:e.description})]})},e.authorId)}))}),E&&Object(x.jsx)(Ga,{size:"medium",color:"secondary","aria-label":"add comment",onClick:function(){return m(!0)},children:Object(x.jsx)(Ma.a,{})}),Object(x.jsx)(Ua.a,{in:O,children:Object(x.jsxs)($a,{children:[Object(x.jsx)(N.a,{onClick:function(){return m(!1)},sx:{position:"absolute",top:4,right:4},children:Object(x.jsx)(Ra.a,{})}),Object(x.jsxs)(d.a,{spacing:2.5,alignItems:"center",children:[Object(x.jsx)(l.a,{variant:"h5",children:i("salon:reviews.addReviewForm.title")}),Object(x.jsx)(_a.a,{value:k,onChange:function(e,t){return I(t)}}),Object(x.jsx)(it.a,{label:i("salon:reviews.addReviewForm.textfield"),variant:"filled",value:g,onChange:function(e){return y(e.target.value)}}),Object(x.jsx)(j.a,{variant:"contained",color:"secondary",size:"large",sx:{width:"144px"},onClick:function(){null!==k&&""!==g&&D({opinion:g,rating:k,salonId:o})},disabled:""===g||null===k,children:i("salon:reviews.addReviewForm.button")})]})]})})]})},Ya=function(e){var t=e.portfolio,n=void 0===t?[]:t,a=Object(v.a)("salon"),r=Object(s.a)(a,1)[0];return Object(x.jsx)(x.Fragment,{children:0===n.length?Object(x.jsx)(Na,{text:r("salon:portfolio.noImages"),icon:Object(x.jsx)(Ma.a,{})}):Object(x.jsx)(U.a,{height:"100%",children:Object(x.jsx)(H.a,{container:!0,spacing:1,children:n.map((function(e){return Object(x.jsx)(H.a,{item:!0,xs:12,md:4,sx:{height:250},children:Object(x.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover"},src:e,alt:"",loading:"lazy"})},e)}))})})})},Xa=n(554),er=n(507),tr=n(187),nr=n(140),ar=Object(m.a)(it.a)((function(){return Object(Y.a)({},ne.breakpoints.up("md"),{width:"140px"})})),rr=Object(m.a)("input")((function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,opacity:0,cursor:"pointer"}})),ir=Object(m.a)(Vn.a,{shouldForwardProp:function(e){return"isActive"!==e}})((function(e){var t=e.isActive;return{width:"140px",padding:ne.spacing(1.5),position:"relative",background:t?ne.palette.primary.main:"translate",color:t?ne.palette.getContrastText(ne.palette.text.primary):ne.palette.text.primary}})),cr=function(){var e=Object(M.i)(),t=e.salonId,n=e.serviceId,a=fn(),i=Object(s.a)(a,2),c=i[0],o=i[1],b=o.data,p=(o.error,xn({salonId:t,serviceId:n})),O=p.data,m=p.isFetching,h=vn(),f=Object(s.a)(h,2),g=f[0],y=f[1],w=y.isSuccess,S=y.isError,k=Object(v.a)("salon"),I=Object(s.a)(k,2),T=I[0],C=I[1],z=Object(r.useState)(new Date),D=Object(s.a)(z,2),F=D[0],A=D[1],q=Object(r.useState)(null),B=Object(s.a)(q,2),E=B[0],W=B[1],L=Object(r.useState)(null),R=Object(s.a)(L,2),_=R[0],V=R[1],N=Object(r.useState)(null),Q=Object(s.a)(N,2),G=Q[0],Z=Q[1],$=Object(P.b)().enqueueSnackbar,J=C.language;if(Object(r.useEffect)((function(){S&&$(T("salon:reservation.errorMsg"),{variant:"error"}),w&&$(T("salon:reservation.successMsg"),{variant:"success"})}),[S,w]),m||void 0===O)return Object(x.jsx)(ha.a,{open:!0,children:Object(x.jsx)(va,{children:Object(x.jsx)(U.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(u.a,{})})})});var Y=[];if(b&&b.freeHours.length>0){var X=Array.from(new Set(b.freeHours.map((function(e){return e.startHours})).flat()));Y=X.sort((function(e,t){return new Date(e).getTime()-new Date(t).getTime()}))}var ee=O.service,te=ee.name,ne=ee.duration,ae=ee.price;return Object(x.jsxs)(d.a,{spacing:1.5,height:"100%",children:[Object(x.jsxs)(d.a,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:"center",children:[Object(x.jsx)(l.a,{variant:"h5",noWrap:!0,children:te}),Object(x.jsx)(l.a,{variant:"h6",width:"fit-content",sx:{whiteSpace:"nowrap"},children:"".concat(Wa(ne)," \u2022 ").concat(ae,"$")})]}),Object(x.jsxs)(d.a,{spacing:2.5,children:[Object(x.jsx)(l.a,{variant:"h6",children:T("reservation.yourFreeTimeHeading")}),Object(x.jsxs)(d.a,{spacing:2.5,direction:{xs:"column",md:"row"},children:[Object(x.jsx)(Xa.a,{disablePast:!0,label:T("reservation.labels.date"),value:F,onChange:function(e){return A(e)},renderInput:function(e){return Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(er.a,{label:T("reservation.labels.start"),value:E,onChange:function(e){return W(e)},renderInput:function(e){return Object(x.jsx)(ar,Object(le.a)(Object(le.a)({},e),{},{size:"small"}))},minutesStep:15}),Object(x.jsx)(er.a,{label:T("reservation.labels.end"),disabled:null===E,value:_,onChange:function(e){return V(e)},renderInput:function(e){return Object(x.jsx)(ar,Object(le.a)(Object(le.a)({},e),{},{size:"small"}))},minutesStep:15}),Object(x.jsx)(j.a,{variant:"contained",size:"small","aria-label":T("reservation.searchButton.aria"),disabled:null===E||null===_,onClick:function(){return function(){if(E&&_){var e=Object(tr.a)(F,E)+1;c({salonId:t,serviceId:n,timeRange:{start:Object(nr.a)(E,e).toString(),end:Object(nr.a)(_,e).toString()}})}}()},children:Object(x.jsx)(K.a,{})})]})]}),Object(x.jsxs)(d.a,{spacing:2.5,sx:{flexGrow:1},children:[Object(x.jsx)(l.a,{variant:"h6",children:T("reservation.ourFreeTimeHeading")}),Object(x.jsx)(d.a,{height:"100%",spacing:1.5,children:Y.length>0?Object(x.jsxs)(d.a,{spacing:.05,children:[Object(x.jsx)(l.a,{children:"\n                ".concat(Object(Ja.a)(new Date(Y[0]),"d LLLL yyyy",{locale:Rt[J]})," \u2022 \n                ").concat(Object(Ja.a)(new Date(Y[0]),"eeee",{locale:Rt[J]}),"\n              ")}),Object(x.jsx)(H.a,{container:!0,spacing:1.5,children:Y.map((function(e){return Object(x.jsx)(H.a,{item:!0,children:Object(x.jsxs)(ir,{isActive:e===G,children:[Object(x.jsx)(rr,{type:"radio",value:e,checked:G===e,onChange:function(){return Z(e)}}),Object(x.jsx)(l.a,{textAlign:"center",children:Object(Ja.a)(new Date(e),"HH:mm")})]})},e)}))})]},Y[0]):Object(x.jsx)(l.a,{children:T("reservation.noDates")})})]}),Object(x.jsx)(U.a,{padding:2,display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(j.a,{disabled:null===G,variant:"contained",onClick:function(){if(G&&b){var e=function(e,t){var n=t.freeHours.find((function(t){return t.startHours.includes(e)}));return void 0!==n?n.workerId:null}(G,b);null!==e&&g({salonId:t,workerId:e,serviceId:n,startHour:G})}},children:T("reservation.bookButton.label")})})]})},or=function(){var e=Object(M.g)(),t=Object(M.i)().salonId,n=Object(v.a)("salon"),a=Object(s.a)(n,1)[0],r=mn({salonId:t}),i=r.data,c=r.isFetching,o=r.isError,b=Object(V.a)(ne.breakpoints.down("md")),O=Object(M.j)(["/:salonId/portfolio","/:salonId/reviews","/:salonId/reservation","/:salonId"]),m=null===O||void 0===O?void 0:O.path;return o?Object(x.jsx)(ha.a,{open:!0,children:Object(x.jsx)(va,{children:Object(x.jsx)(U.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsxs)(d.a,{maxWidth:"40%",children:[Object(x.jsx)(l.a,{variant:"h4",textAlign:"center",marginBottom:2,children:a("salon:error.unknown")}),Object(x.jsx)(j.a,{variant:"text",component:p.b,to:"/",sx:{alignSelf:"center"},children:a("salon:goBackButton.aria")})]})})})}):c||void 0===i?Object(x.jsx)(ha.a,{open:!0,children:Object(x.jsx)(va,{children:Object(x.jsx)(U.a,{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(u.a,{})})})}):Object(x.jsx)(ha.a,{open:!0,BackdropProps:{onClick:function(){return e.push("/")}},children:Object(x.jsxs)(va,{children:[Object(x.jsxs)(d.a,{direction:"row",spacing:b?1.5:3,sx:{maxWidth:"100%"},padding:b?"10px 15px 0":"25px 25px 0",children:[Object(x.jsx)(ga,{component:p.b,to:"/:salonId/reservation"!==m?"/":"/".concat(t),"aria-label":a("salon:goBackButton.aria"),children:Object(x.jsx)(fa.a,{})}),Object(x.jsxs)(d.a,{spacing:-.5,overflow:"hidden",alignSelf:"center",children:[Object(x.jsx)(ya,{variant:"h4",noWrap:!0,children:i.name}),Object(x.jsx)(wa,{variant:"caption",noWrap:!0,children:"".concat(i.address," ").concat(i.city.charAt(0).toUpperCase()).concat(i.city.slice(1))})]})]}),"/:salonId/reservation"!==m&&Object(x.jsx)(Sa,{currentTab:m}),Object(x.jsxs)(U.a,{padding:b?"10px":"25px",flexGrow:1,overflow:"auto",position:"relative",children:["/:salonId"===m&&Object(x.jsx)(Pa,{description:i.description,phone:i.phone,imageUrl:i.imageUrl,openingHours:i.openingHours,services:i.services,crew:i.crew}),"/:salonId/reviews"===m&&Object(x.jsx)(Ka,{reviews:i.reviews}),"/:salonId/portfolio"===m&&Object(x.jsx)(Ya,{portfolio:i.portfolio}),"/:salonId/reservation"===m&&Object(x.jsx)(cr,{})]})]})})},sr=n(501),lr=n(491),dr=n(492),jr=n(493),ur=n(494),br=n(495),pr=n(115),Or=Object(m.a)(Un.a)((function(){return{justifyContent:"flex-end"}})),mr=Object(m.a)(Hn.a)((function(e){var t,n=e.theme;return t={},Object(Y.a)(t,n.breakpoints.down("md"),{".MuiDrawer-paper":{width:"100%"}}),Object(Y.a)(t,".MuiDrawer-paper",{border:0}),t})),hr=Object(m.a)(Xn.a)((function(e){var t=e.theme;return{"& > a":Object(Y.a)({color:t.palette.text.primary},t.breakpoints.up("md"),{width:"100%",padding:"8px 40px"}),"& > .selected":{color:t.palette.primary.main,"& svg":{fill:t.palette.primary.main}}}})),xr=function(e){var t=e.isMenuOpen,n=e.handleClose,a=Object(M.h)(),i=Object(pr.a)(),c=Object(V.a)(i.breakpoints.down("md")),o=Object(v.a)("profile"),l=Object(s.a)(o,1)[0];Object(r.useEffect)((function(){return n()}),[a]);var d=[{link:"/profile/edit",text:l("navigation.account"),icon:Object(x.jsx)(lr.a,{})},{link:"/profile/password",text:l("navigation.password"),icon:Object(x.jsx)(dr.a,{})},{link:"/profile/delete",text:l("navigation.deleteAccount"),icon:Object(x.jsx)(jr.a,{})},{link:"/profile/favorites",text:l("navigation.favorites"),icon:Object(x.jsx)(ur.a,{})}];return Object(x.jsxs)(mr,{open:t,variant:c?"temporary":"permanent",children:[Object(x.jsx)(Or,{children:c?Object(x.jsx)(N.a,{onClick:n,children:Object(x.jsx)(ia.a,{})}):null}),Object(x.jsx)(hr,{children:d.map((function(e){var t=e.icon,n=e.link,a=e.text;return Object(x.jsxs)(ea.a,{button:!0,component:p.c,activeClassName:"selected",to:n,children:[Object(x.jsx)(br.a,{children:t}),Object(x.jsx)($.a,{primary:a})]},n)}))})]})},fr=n(555),vr=Object(m.a)(fr.a)((function(){return Object(Y.a)({zIndex:1},ne.breakpoints.up("md"),{zIndex:ne.zIndex.drawer+1})})),gr=Object(m.a)(Un.a)((function(){return{justifyContent:"space-between"}})),yr=Object(m.a)(j.a)((function(){return{color:"#fff",textDecoration:"none"}})),wr=Object(m.a)(N.a)((function(){return{paddingLeft:0,paddingRight:ne.spacing(2.5)}})),Sr=Object(m.a)(N.a)((function(){return{padding:0}})),kr=Object(m.a)(l.a)((function(){return{marginRight:ne.spacing(1),height:"fit-content",color:ne.palette.grey[500]}})),Ir=Object(m.a)(G.a)((function(){return{paddingRight:ne.spacing(3)}})),Tr=Object(m.a)(p.b)(Fa||(Fa=Object(Re.a)(["\n  text-decoration: none;\n  color: ",";\n"])),ne.palette.text.primary),Cr=function(e){var t=e.isMenuOpen,n=e.handleClose,a=Object(M.h)(),i=tn().data,c=void 0===i?{salons:[],message:""}:i,o=Object(V.a)(ne.breakpoints.down("md"));return Object(r.useEffect)((function(){o||n()}),[o]),Object(r.useEffect)((function(){return n()}),[a]),Object(x.jsxs)(Qn,{open:t,variant:"temporary",children:[Object(x.jsx)(Nn,{children:Object(x.jsx)(N.a,{onClick:n,children:Object(x.jsx)(ia.a,{})})}),Object(x.jsx)(b.a,{padding:2,children:Object(x.jsx)(Zn,{data:c})})]})},zr=n(355),Dr=n(496),Fr=n(497),Ar=n(498),qr=n(499),Br=n(500),Er=function(e){var t=e.open,n=e.anchorEl,a=e.onClose,r=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role})),i=Object(M.g)(),c=Object(v.a)("header"),o=Object(s.a)(c,1)[0];return Object(x.jsxs)(zr.a,{anchorEl:n,open:t,onClose:a,onClick:a,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(x.jsxs)(Ir,{component:p.b,to:"/profile/edit",children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Dr.a,{})}),o("navigation.profile")]}),"STANDARD"===r&&Object(x.jsxs)(Ir,{component:p.b,to:"/profile/favorites",children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Fr.a,{})}),o("navigation.favorites")]}),"STANDARD"===r&&Object(x.jsxs)(Ir,{children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Ar.a,{})}),o("navigation.schedule")]}),"BUSINESS"===r&&Object(x.jsxs)(Ir,{component:p.b,to:"/salons",children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(qr.a,{})}),o("navigation.business")]}),Object(x.jsxs)(Ir,{onClick:function(){return F(i.push)},children:[Object(x.jsx)(br.a,{children:Object(x.jsx)(Br.a,{})}),o("navigation.signOut")]})]})},Wr=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),c=Object(s.a)(i,2),o=c[0],d=c[1],j=Object(v.a)("header"),u=Object(s.a)(j,1)[0],O=Object(M.h)().pathname,m=Object(Ce.e)((function(e){return e.user})),h=Boolean(n),f=Object(V.a)((function(e){return e.breakpoints.up("md")}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(vr,{color:"transparent",elevation:0,position:"relative",children:Object(x.jsxs)(gr,{children:[Object(x.jsxs)(b.a,{display:"flex",children:[(O.startsWith("/profile")||O.startsWith("/salons"))&&!f&&Object(x.jsx)(wr,{onClick:function(){return d(!0)},children:Object(x.jsx)(sr.a,{})}),Object(x.jsx)(Tr,{to:"/",children:Object(x.jsx)(l.a,{variant:"h4",component:"h1",children:u("title")})})]}),Object(x.jsx)(b.a,{display:"flex",alignItems:"center",children:z()?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(kr,{variant:"body2",children:null===m||void 0===m?void 0:m.fullname}),Object(x.jsx)(Sr,{onClick:function(e){return a(e.currentTarget)},children:Object(x.jsx)(kt.a,{alt:null===m||void 0===m?void 0:m.fullname,src:null===m||void 0===m?void 0:m.avatarUrl})})]}):Object(x.jsx)(yr,{variant:"contained",color:"primary",disableElevation:!0,component:p.b,to:"/login",children:u("button.signin")})})]})}),Object(x.jsx)(Er,{open:h,onClose:function(){return a(null)},anchorEl:n}),z()&&O.startsWith("/profile")&&Object(x.jsx)(xr,{handleClose:function(){return d(!1)},isMenuOpen:o}),z()&&O.startsWith("/salons")&&Object(x.jsx)(Cr,{handleClose:function(){return d(!1)},isMenuOpen:o})]})};!function(e){e.Normal="NORMAL",e.Business="BUSINESS",e.Unauthorized="UNAUTHORIZED"}(Aa||(Aa={}));var Lr=function(e){var t=e.children,n=e.path,a=e.render,r=e.userType,i=void 0===r?Aa.Normal:r,c=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.role}));return i===Aa.Business&&c===ce.Standard||i!==Aa.Unauthorized&&!z()||i===Aa.Unauthorized&&z()?Object(x.jsx)(M.a,{to:"/"}):a?Object(x.jsx)(M.b,{path:n,render:a,children:t}):Object(x.jsx)(M.b,{path:n,children:t})},Pr=n(556),Mr=n(558),Rr=n(559),_r=n(502),Ur=function(e){var t,n,a,i,c,o,j,u=e.register,b=e.errors,p=e.setValue,O=Object(v.a)("admin"),m=Object(s.a)(O,1)[0],h=Object(r.useState)(void 0),f=Object(s.a)(h,2),g=f[0],y=f[1],w=ke().data,S=Se().data;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:m("createSalon.forms.details.name"),type:"text"},u("name",{required:{value:!0,message:m("common.required",{ns:"validation"})},minLength:{value:3,message:m("common.minLength",{ns:"validation",min:3})}})),{},{error:!!b.name,helperText:null===(t=b.name)||void 0===t?void 0:t.message})),Object(x.jsx)("input",{type:"file",id:"avatar-image-upload",accept:"image/png, image/jpeg",onChange:function(e){return function(e){var t,n,a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],r=URL.createObjectURL(a);p("image",a),y(r)}(e)},hidden:!0}),Object(x.jsx)("label",{htmlFor:"avatar-image-upload",children:Object(x.jsx)(Vn.a,{elevation:0,variant:"outlined",sx:{height:"300px",cursor:"pointer"},children:g?Object(x.jsx)("img",{src:g,width:"100%",height:"100%"}):Object(x.jsxs)(d.a,{height:"100%",justifyContent:"center",alignItems:"center",children:[Object(x.jsx)(_r.a,{}),Object(x.jsx)(l.a,{children:m("createSalon.forms.details.photo")})]})})}),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:m("createSalon.forms.details.address"),type:"text"},u("address",{required:{value:!0,message:m("common.required",{ns:"validation"})}})),{},{error:!!b.address,helperText:null===(n=b.address)||void 0===n?void 0:n.message})),Object(x.jsx)(it.a,{variant:"outlined",size:"small",label:m("createSalon.forms.details.city"),select:!0,onChange:function(e){return p("city",e.target.value)},error:!!b.city,helperText:null===(a=b.city)||void 0===a?void 0:a.message,defaultValue:"",sx:{textTransform:"capitalize"},children:w&&(null===w||void 0===w?void 0:w.cities.map((function(e){return Object(x.jsx)(G.a,{value:e._id,sx:{textTransform:"capitalize"},children:e.name},e._id)})))}),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:m("createSalon.forms.details.postalCode"),type:"text"},u("postalCode",{required:{value:!0,message:m("common.required",{ns:"validation"})},pattern:{value:/\d{2}[-]{0,1}\d{3}$/,message:m("postalCode.pattern",{ns:"validation"})}})),{},{error:!!b.postalCode,helperText:null===(i=b.postalCode)||void 0===i?void 0:i.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:m("createSalon.forms.details.phone"),type:"text"},u("phone",{required:{value:!0,message:m("common.required",{ns:"validation"})}})),{},{error:!!b.phone,helperText:null===(c=b.phone)||void 0===c?void 0:c.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",size:"small",label:m("createSalon.forms.details.email"),type:"text"},u("contactEmail",{required:{value:!0,message:m("common.required",{ns:"validation"})}})),{},{error:!!b.contactEmail,helperText:null===(o=b.contactEmail)||void 0===o?void 0:o.message})),Object(x.jsx)(it.a,{variant:"outlined",size:"small",label:m("createSalon.forms.details.type"),select:!0,onChange:function(e){return p("type",e.target.value)},error:!!b.type,helperText:null===(j=b.type)||void 0===j?void 0:j.message,defaultValue:"",children:S&&(null===S||void 0===S?void 0:S.categories.map((function(e){return Object(x.jsx)(G.a,{value:e._id,children:m("salonType.".concat(e.name.toLowerCase()),{ns:"common"})},e._id)})))})]})},Hr=function(e){var t=e.register,n=Object(v.a)(["admin","common"]),a=Object(s.a)(n,1)[0];return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.a,{direction:"column",spacing:1,children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map((function(e,n){return Object(x.jsxs)(H.a,{container:!0,children:[Object(x.jsx)(H.a,{item:!0,container:!0,xs:3,alignItems:"center",children:Object(x.jsx)(l.a,{variant:"body1",children:a("daysOfTheWeek.".concat(e.toLowerCase()),{ns:"common"})})}),Object(x.jsxs)(H.a,{item:!0,container:!0,xs:!0,alignItems:"center",children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",label:a("createSalon.forms.openingHours.from"),size:"small"},t("openingHours.".concat(e.toLowerCase(),".open"))),{},{margin:"dense",sx:{marginRight:1}})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({variant:"outlined",label:a("createSalon.forms.openingHours.to"),size:"small"},t("openingHours.".concat(e.toLowerCase(),".close"))),{},{margin:"dense"}))]})]},n)}))})})},Vr=function(e){var t=e.register,n=e.watch,a=e.getValues,r=e.setValue,i=Object(v.a)("admin"),c=Object(s.a)(i,1)[0],o=n("crew");return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(x.jsx)(it.a,Object(le.a)({variant:"outlined",size:"small",label:c("createSalon.forms.crew.fullname"),type:"text",sx:{flexGrow:1}},t("crewInput"))),Object(x.jsx)(j.a,{onClick:function(){var e=a("crew"),t={name:a("crewInput"),imageId:""};Array.isArray(e)?(e.push(t),r("crew",e)):r("crew",[t]),r("crewInput","")},endIcon:Object(x.jsx)(Mn.a,{}),variant:"outlined",children:c("createSalon.forms.crew.addButton")})]}),Object(x.jsxs)(l.a,{variant:"body1",component:"p",children:[c("createSalon.forms.crew.heading"),":"]}),Object(x.jsx)(d.a,{direction:"row",spacing:1,flexWrap:"wrap",children:o&&o.map((function(e,t){return Object(x.jsx)(oe.a,{label:e.name,avatar:Object(x.jsx)(kt.a,{children:e.name[0]}),onDelete:function(){return function(e){var t=a("crew");t.splice(e,1),r("crew",t)}(t)},color:"secondary",sx:{marginBottom:1}},t)}))})]})},Nr=n(503),Qr=function(e){var t,n,a,r,i=e.register,c=e.watch,o=e.errors,u=e.getValues,b=e.setValue,p=e.reset,O=Object(v.a)(["admin"]),m=Object(s.a)(O,1)[0],h=c("services");return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{spacing:2,children:[Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:m("admin:serviceDialog.name")},i("service.name")),{},{error:!!o.name,helperText:null===(t=o.name)||void 0===t?void 0:t.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:m("admin:serviceDialog.price"),type:"number"},i("service.price")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"\u20ac"}),inputProps:{min:0}},error:!!o.price,helperText:null===(n=o.price)||void 0===n?void 0:n.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:m("admin:serviceDialog.duration"),type:"number",multiline:!0,maxRows:4},i("service.duration")),{},{InputProps:{endAdornment:Object(x.jsx)(ct.a,{position:"start",children:"min"}),inputProps:{min:0,step:1}},error:!!o.duration,helperText:null===(a=o.duration)||void 0===a?void 0:a.message})),Object(x.jsx)(it.a,Object(le.a)(Object(le.a)({size:"small",variant:"outlined",label:m("admin:serviceDialog.description")},i("service.description")),{},{error:!!o.description,helperText:null===(r=o.description)||void 0===r?void 0:r.message})),Object(x.jsx)(j.a,{onClick:function(){var e=u("services"),t=u("service");Array.isArray(e)?(e.push(t),b("services",e)):b("services",[t]),p(Object(le.a)(Object(le.a)({},u()),{},{service:{}}))},endIcon:Object(x.jsx)(Mn.a,{}),variant:"outlined",children:m("createSalon.forms.services.addButton")})]}),Object(x.jsxs)(l.a,{variant:"body1",component:"p",children:[m("createSalon.forms.services.heading"),":"]}),Object(x.jsx)(Xn.a,{children:h&&h.map((function(e,t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ea.a,{secondaryAction:Object(x.jsx)(N.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){var t=u("services");t.splice(e,1),b("services",t)}(t)},children:Object(x.jsx)(jr.a,{})}),children:Object(x.jsx)($.a,{primary:e.name,secondary:Object(x.jsxs)(Xn.a,{sx:{width:"100%"},children:[Object(x.jsx)(ea.a,{children:Object(x.jsxs)(l.a,{variant:"body2",component:"p",children:[m("createSalon.forms.services.cards.price"),": ",e.price,"\u20ac"]})}),Object(x.jsx)(ea.a,{children:Object(x.jsxs)(l.a,{variant:"body2",component:"p",children:[m("createSalon.forms.services.cards.duration"),": ",e.duration," min"]})}),Object(x.jsx)(ea.a,{children:Object(x.jsxs)(l.a,{variant:"body2",component:"p",children:[m("createSalon.forms.services.cards.description"),": ",e.description]})})]})})},t),t<h.length-1&&Object(x.jsx)(Nr.a,{})]})}))})]})},Gr=function(){var e=Object(v.a)(["admin","common","validation"]),t=Object(s.a)(e,1)[0],n=[t("createSalon.stepsLabel.details"),t("createSalon.stepsLabel.openingHours"),t("createSalon.stepsLabel.crew"),t("createSalon.stepsLabel.services")],a=[t("createSalon.stepsTitle.details"),t("createSalon.stepsTitle.openingHours"),t("createSalon.stepsTitle.crew"),t("createSalon.stepsTitle.services")],i=Object(r.useState)(0),c=Object(s.a)(i,2),o=c[0],u=c[1],b=Object(ut.b)({mode:"onBlur"}),p=b.register,O=b.handleSubmit,m=b.watch,h=b.getValues,f=b.setValue,g=b.reset,y=b.formState.errors,w=ln(),k=Object(s.a)(w,2),I=k[0],T=k[1],C=T.isSuccess,z=T.isError,D=Object(Ce.e)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.id})),F=Object(P.b)().enqueueSnackbar,A=Object(M.g)();Object(r.useEffect)((function(){C&&(F(t(t("createSalon.snackbar.created")),{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),A.push("/salons")),z&&(F(t(t("createSalon.snackbar.failed")),{variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}}),A.push("/salons"))}),[C,z]);var q=function(){var e=Object(mt.a)(Ot.a.mark((function e(t){var n,a,r,i,c,o,s,l,d,j,u,b;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!t.image){e.next=14;break}return(a=new FormData).append("image",t.image),e.prev=4,e.next=7,gt()({method:"post",url:"".concat(S,"/image-upload"),data:a,headers:{"Content-Type":"multipart/form-data"}});case 7:r=e.sent,n=r.data.links[0],e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:i=Object.keys(t.openingHours),c=i.map((function(e){return Object(le.a)({name:e.toLowerCase()},t.openingHours[e])})),o=t.name,s=t.address,l=t.city,d=t.services,j=t.crew,u=t.description,b=t.type,I({owner:D,name:o,address:s,city:l,services:d,crew:j,description:u,type:[b],imageUrl:n,openingHours:c,contact:{email:t.contactEmail,phone:t.phone}});case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){"next"===e&&(o===n.length-1&&O(q)(),o+1<n.length&&u((function(e){return e+1}))),"back"===e&&o-1>=0&&u((function(e){return e-1}))};return Object(x.jsxs)(_.a,{maxWidth:!1,children:[Object(x.jsx)(U.a,{sx:{marginBottom:2},children:Object(x.jsx)(l.a,{component:"h1",variant:"h5",children:t("createSalon.mainHeading")})}),Object(x.jsxs)(d.a,{spacing:2,alignItems:"center",children:[Object(x.jsx)(_.a,{maxWidth:"lg",disableGutters:!0,children:Object(x.jsx)(Pr.a,{activeStep:o,children:n.map((function(e,t){return Object(x.jsx)(Mr.a,{children:Object(x.jsx)(Rr.a,{children:e})},t)}))})}),Object(x.jsxs)(_.a,{maxWidth:"lg",disableGutters:!0,children:[Object(x.jsx)(l.a,{variant:"h6",component:"h2",children:a[o]}),Object(x.jsx)(H.a,{container:!0,sx:{marginY:2},justifyContent:"center",children:Object(x.jsx)(H.a,{item:!0,xs:!0,lg:6,children:Object(x.jsx)("form",{children:Object(x.jsx)(d.a,{spacing:2,children:function(){switch(o){case 0:return Object(x.jsx)(Ur,{register:p,errors:y,setValue:f});case 1:return Object(x.jsx)(Hr,{register:p});case 2:return Object(x.jsx)(Vr,{register:p,watch:m,setValue:f,getValues:h});case 3:return Object(x.jsx)(Qr,{register:p,watch:m,setValue:f,getValues:h,reset:g,errors:y})}}()})})})}),Object(x.jsxs)(d.a,{spacing:1,direction:"row",justifyContent:"flex-end",paddingBottom:2,children:[Object(x.jsx)(j.a,{variant:"outlined",onClick:function(){return B("back")},disabled:0===o,disableElevation:!0,children:t("createSalon.controls.back")}),Object(x.jsx)(j.a,{variant:"contained",onClick:function(){return B("next")},disableElevation:!0,type:"button",children:o===n.length-1?t("createSalon.controls.save"):t("createSalon.controls.next")})]})]})]})]})},Zr=function(){return Object(x.jsx)(p.a,{basename:"/voirsy-front-end",children:Object(x.jsx)(r.Suspense,{fallback:"loading",children:Object(x.jsx)(_t,{children:Object(x.jsxs)(M.d,{children:[Object(x.jsx)(Lr,{userType:Aa.Unauthorized,path:"/login",children:Object(x.jsx)(An,{})}),Object(x.jsx)(Lr,{path:"/profile",render:function(e){var t=e.match.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Wr,{}),Object(x.jsxs)(M.d,{children:[Object(x.jsx)(M.b,{path:"".concat(t,"/edit"),children:Object(x.jsx)(Ft,{})}),Object(x.jsx)(M.b,{path:"".concat(t,"/password"),children:Object(x.jsx)(bt,{})}),Object(x.jsx)(M.b,{path:"".concat(t,"/delete"),children:Object(x.jsx)(R,{})}),Object(x.jsx)(M.b,{path:"".concat(t,"/favorites"),children:Object(x.jsx)(ma,{})}),Object(x.jsx)(M.b,{path:"*",children:Object(x.jsx)(M.a,{to:"".concat(t,"/edit")})})]})]})}}),Object(x.jsx)(Lr,{userType:Aa.Business,path:"/salons",render:function(e){var t=e.match.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Wr,{}),Object(x.jsxs)(M.d,{children:[Object(x.jsx)(M.b,{path:"".concat(t,"/:salonId/calendar"),children:Object(x.jsx)($n,{children:Object(x.jsx)(Oa,{})})}),Object(x.jsx)(M.b,{path:"".concat(t,"/:salonId/portfolio"),children:Object(x.jsx)($n,{children:Object(x.jsx)(pa,{})})}),Object(x.jsx)(M.b,{path:"".concat(t,"/create-salon"),children:Object(x.jsx)(Gr,{})}),Object(x.jsx)(M.b,{path:["".concat(t,"/:salonId/details")],children:Object(x.jsx)($n,{children:Object(x.jsx)(ba,{})})}),Object(x.jsx)(M.b,{path:"*",children:Object(x.jsx)($n,{})})]})]})}}),Object(x.jsx)(M.b,{path:"/",render:function(e){var t=e.match.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Wr,{}),Object(x.jsx)(nt,{}),Object(x.jsxs)(M.d,{children:[Object(x.jsx)(M.b,{path:"".concat(t,":salonId/reviews"),children:Object(x.jsx)(or,{})}),Object(x.jsx)(M.b,{path:"".concat(t,":salonId/portfolio"),children:Object(x.jsx)(or,{})}),Object(x.jsx)(Lr,{path:"".concat(t,":salonId/reservation/:serviceId"),children:Object(x.jsx)(or,{})}),Object(x.jsx)(M.b,{path:["".concat(t,":salonId"),"".concat(t,":salonId/information")],children:Object(x.jsx)(or,{})})]})]})}})]})})})})},$r=(n(409),n(236)),Jr=n(94),Kr=n(351),Yr=n(352);$r.a.use(Kr.a).use(Yr.a).use(Jr.e).init({backend:{loadPath:"".concat("/voirsy-front-end","/locales/{{lng}}/{{ns}}.json"),allowMultiLoading:!0},fallbackLng:"en-us",lowerCaseLng:!0,load:"currentOnly"});$r.a;o.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(Ce.a,{store:wn,children:Object(x.jsx)(Zr,{})})}),document.getElementById("root"))}},[[410,1,2]]]);
//# sourceMappingURL=main.84c6aec7.chunk.js.map